oracle@oemgridwt1:/dba_work_area/PRs/96.0 > executioner.py -c 96.0_uiis03.json
==========================================================================================
            STARTING EXECUTION Application RELEASE_96.0 - RUN #17 [SEQUENTIAL]
==========================================================================================
2025-05-13 13:13:38 - INFO - Starting job 'PR_104699'
2025-05-13 13:13:38 - INFO - Running job: PR_104699 Command: sqlplus /nolog @PR_104699.sql $(authlookup -u uii0@uiis03 -p) # Run as uii0
2025-05-13 13:13:38 - INFO - Job PR_104699 post_check: check_no_ora_errors(log_file=/dba_work_area/PRs/96.0/logs/uiis03/*104699*.log) - failed
2025-05-13 13:13:43 - ERROR - Job PR_104699 failed after 0.57 seconds.
2025-05-13 13:13:43 - ERROR - Stopping execution.
2025-05-13 13:13:43 - WARNING - The following jobs were not completed: PR_104682, PR_104180, PR_104681, PR_104181, PR_104699, run_cmd_2, PR_104740, PR_104460, PR_104780, PR_104221, PR_104459, PR_104739, run_cmd_1, PR_104781, PR_104719
2025-05-13 13:13:43 - WARNING - Email notifications enabled but email_address is invalid: ''.
========================================
           EXECUTION SUMMARY
========================================
Application: RELEASE_96.0
Run ID: 17
Status: FAILED
Start Time: 2025-05-13 13:13:38
End Time: 2025-05-13 13:13:43
Duration: 0:00:05
Jobs Completed: 0
Jobs Failed: 15
Jobs Skipped: 0

Failed Jobs (see job log paths below):
  - PR_104682: Running PR_104682.sql
      Reason: Post-check failed
  - PR_104180: Running PR_104180.sql
      Reason: Post-check failed
  - PR_104681: Running PR_104681.sql
      Reason: Post-check failed
  - PR_104181: Running PR_104181.sql
      Reason: Post-check failed
  - PR_104699: Running PR_104699.sql
      Reason: Post-check failed
      Log: /dba_work_area/PRs/96.0/logs/executioner.RELEASE_96.0.job-PR_104699.run-17.log
  - run_cmd_2: Run command: run -u acsdba@uiis03 tablenoparallel # sqlplus PR_
      Reason: Post-check failed
  - PR_104740: Running PR_104740.sql
      Reason: Post-check failed
  - PR_104460: Running PR_104460.sql
      Reason: Post-check failed
  - PR_104780: Running PR_104780.sql
      Reason: Post-check failed
  - PR_104221: Running PR_104221.sql
      Reason: Post-check failed
  - PR_104459: Running PR_104459.sql
      Reason: Post-check failed
  - PR_104739: Running PR_104739.sql
      Reason: Post-check failed
  - run_cmd_1: Run command: run -u acsdba@uiis03 indexnoparallel # sqlplus PR_
      Reason: Post-check failed
  - PR_104781: Running PR_104781.sql
      Reason: Post-check failed
  - PR_104719: Running PR_104719.sql
      Reason: Post-check failed
========================================


oracle@oemgridwt1:/dba_work_area/PRs/96.0 > cat /dba_work_area/PRs/96.0/logs/executioner.RELEASE_96.0.job-PR_104699.run-17.log
2025-05-13 13:13:38,262 - INFO - Executing job - PR_104699: sqlplus /nolog @PR_104699.sql $(authlookup -u uii0@uiis03 -p) # Run as uii0
2025-05-13 13:13:38,434 - INFO -
2025-05-13 13:13:38,434 - INFO - SQL*Plus: Release 19.0.0.0.0 - Production on Tue May 13 13:13:38 2025
2025-05-13 13:13:38,435 - INFO - Version 19.13.0.0.0
2025-05-13 13:13:38,435 - INFO -
2025-05-13 13:13:38,435 - INFO - Copyright (c) 1982, 2021, Oracle.  All rights reserved.
2025-05-13 13:13:38,435 - INFO -
2025-05-13 13:13:38,441 - INFO - 13:13:38 idle> set CONCAT ~
2025-05-13 13:13:38,441 - INFO - 13:13:38 idle> SET VERIFY OFF
2025-05-13 13:13:38,442 - INFO - 13:13:38 idle> set serveroutput on size 1000000
2025-05-13 13:13:38,442 - INFO - 13:13:38 idle>
2025-05-13 13:13:38,442 - INFO - 13:13:38 idle> conn uii0/&1
2025-05-13 13:13:38,727 - INFO - Connected.
2025-05-13 13:13:38,742 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,742 - INFO - 13:13:38 uii0@UIIS03> -- Spool output Start
2025-05-13 13:13:38,742 - INFO - 13:13:38 uii0@UIIS03> col environment new_val environment format a20
2025-05-13 13:13:38,742 - INFO - 13:13:38 uii0@UIIS03> col online_flag new_val online_flag format a20
2025-05-13 13:13:38,743 - INFO - 13:13:38 uii0@UIIS03> select regexp_replace('&1', '^.+@') environment from dual;
2025-05-13 13:13:38,743 - INFO -
2025-05-13 13:13:38,743 - INFO - ENVIRONMENT
2025-05-13 13:13:38,743 - INFO - --------------------
2025-05-13 13:13:38,743 - INFO - uiis03
2025-05-13 13:13:38,744 - INFO -
2025-05-13 13:13:38,744 - INFO - 1 row selected.
2025-05-13 13:13:38,744 - INFO -
2025-05-13 13:13:38,744 - INFO - Elapsed: 00:00:00.00
2025-05-13 13:13:38,744 - INFO - 13:13:38 uii0@UIIS03> select case when regexp_like('&environment','uiip|uiis') then 'ONLINE PARALLEL 8' else '' end online_flag from dual;
2025-05-13 13:13:38,745 - INFO -
2025-05-13 13:13:38,745 - INFO - ONLINE_FLAG
2025-05-13 13:13:38,745 - INFO - --------------------
2025-05-13 13:13:38,745 - INFO - ONLINE PARALLEL 8
2025-05-13 13:13:38,746 - INFO -
2025-05-13 13:13:38,746 - INFO - 1 row selected.
2025-05-13 13:13:38,746 - INFO -
2025-05-13 13:13:38,746 - INFO - Elapsed: 00:00:00.00
2025-05-13 13:13:38,746 - INFO - 13:13:38 uii0@UIIS03> host mkdir -pv logs/&environment
2025-05-13 13:13:38,752 - INFO -
2025-05-13 13:13:38,753 - INFO - 13:13:38 uii0@UIIS03> spool logs/&environment/96.0_pr_104699.log
2025-05-13 13:13:38,756 - INFO - 13:13:38 uii0@UIIS03> -- Spool output End
2025-05-13 13:13:38,757 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,757 - INFO - 13:13:38 uii0@UIIS03> -- @Dylan
2025-05-13 13:13:38,757 - INFO - 13:13:38 uii0@UIIS03> exec prt ('104699', '96.0');
2025-05-13 13:13:38,761 - INFO - COUNT :1
2025-05-13 13:13:38,762 - INFO -
2025-05-13 13:13:38,762 - INFO - PL/SQL procedure successfully completed.
2025-05-13 13:13:38,762 - INFO -
2025-05-13 13:13:38,762 - INFO - Elapsed: 00:00:00.01
2025-05-13 13:13:38,762 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,762 - INFO - 13:13:38 uii0@UIIS03> -- Run as uii0
2025-05-13 13:13:38,763 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,763 - INFO - 13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
2025-05-13 13:13:38,763 - INFO - 13:13:38 uii0@UIIS03> -- Create table/type
2025-05-13 13:13:38,763 - INFO - 13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
2025-05-13 13:13:38,763 - INFO - 13:13:38 uii0@UIIS03> create or replace PACKAGE UP_IDP_SYNC AS
2025-05-13 13:13:38,763 - INFO - 13:13:38   2         PROCEDURE LOOKUP_APPROVAL_STATUS_ABLE(
2025-05-13 13:13:38,764 - INFO - 13:13:38   3              P_BRANDING          IN  VARCHAR2,
2025-05-13 13:13:38,764 - INFO - 13:13:38   4              P_USERNAME        IN VARCHAR2,
2025-05-13 13:13:38,764 - INFO - 13:13:38   5              P_APPROVAL_STATUS OUT VARCHAR2
2025-05-13 13:13:38,764 - INFO - 13:13:38   6         );
2025-05-13 13:13:38,764 - INFO - 13:13:38   7
2025-05-13 13:13:38,764 - INFO - 13:13:38   8
2025-05-13 13:13:38,765 - INFO - 13:13:38   9         PROCEDURE LOOKUP_USERNAME_529(
2025-05-13 13:13:38,765 - INFO - 13:13:38  10              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,765 - INFO - 13:13:38  11              P_USERNAME_OUT OUT UP_USERNAME_TYPE
2025-05-13 13:13:38,765 - INFO - 13:13:38  12          );
2025-05-13 13:13:38,766 - INFO - 13:13:38  13
2025-05-13 13:13:38,766 - INFO - 13:13:38  14          PROCEDURE LOOKUP_USERNAME_ABLE(
2025-05-13 13:13:38,766 - INFO - 13:13:38  15              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,766 - INFO - 13:13:38  16              P_USERNAME_OUT OUT UP_USERNAME_TYPE
2025-05-13 13:13:38,766 - INFO - 13:13:38  17          );
2025-05-13 13:13:38,767 - INFO - 13:13:38  18
2025-05-13 13:13:38,767 - INFO - 13:13:38  19          PROCEDURE LOOKUP_PROFILE_529(
2025-05-13 13:13:38,767 - INFO - 13:13:38  20              P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
2025-05-13 13:13:38,768 - INFO - 13:13:38  21              P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
2025-05-13 13:13:38,768 - INFO - 13:13:38  22          );
2025-05-13 13:13:38,768 - INFO - 13:13:38  23
2025-05-13 13:13:38,768 - INFO - 13:13:38  24          PROCEDURE LOOKUP_PROFILE_ABLE(
2025-05-13 13:13:38,768 - INFO - 13:13:38  25              P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
2025-05-13 13:13:38,769 - INFO - 13:13:38  26              P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
2025-05-13 13:13:38,769 - INFO - 13:13:38  27          );
2025-05-13 13:13:38,769 - INFO - 13:13:38  28
2025-05-13 13:13:38,769 - INFO - 13:13:38  29          PROCEDURE IDP_SYNC_ADD_CONFIRM_NOTIFY (
2025-05-13 13:13:38,770 - INFO - 13:13:38  30              P_CHANGE_ID   IN TU_CONFIRM.CHANGE_ID%TYPE,
2025-05-13 13:13:38,770 - INFO - 13:13:38  31              P_CTYPE       IN TU_CONFIRM.CTYPE%TYPE,
2025-05-13 13:13:38,770 - INFO - 13:13:38  32              P_SUPPRESS    IN TU_CONFIRM.SUPPRESS%TYPE,
2025-05-13 13:13:38,771 - INFO - 13:13:38  33              P_STYLE       IN TU_CONFIRM.STYLE%TYPE,
2025-05-13 13:13:38,771 - INFO - 13:13:38  34              P_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE,
2025-05-13 13:13:38,771 - INFO - 13:13:38  35              P_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE,
2025-05-13 13:13:38,771 - INFO - 13:13:38  36              P_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE,
2025-05-13 13:13:38,771 - INFO - 13:13:38  37              P_CSR_ID          TU_PERSON.CSR_ID%TYPE
2025-05-13 13:13:38,772 - INFO - 13:13:38  38          );
2025-05-13 13:13:38,772 - INFO - 13:13:38  39
2025-05-13 13:13:38,772 - INFO - 13:13:38  40          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529(
2025-05-13 13:13:38,772 - INFO - 13:13:38  41              P_ACCT_CONV_SEARCH_IN IN UP_ACCOUNT_CONVERSION_SEARCH_TYPE,
2025-05-13 13:13:38,773 - INFO - 13:13:38  42              P_PROFILE_OUT_LIST OUT UP_CONV_ACCT_TYPE
2025-05-13 13:13:38,773 - INFO - 13:13:38  43          );
2025-05-13 13:13:38,773 - INFO - 13:13:38  44
2025-05-13 13:13:38,773 - INFO - 13:13:38  45          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529_V1(
2025-05-13 13:13:38,773 - INFO - 13:13:38  46              P_MIN_SEQ_ID IN NUMBER,
2025-05-13 13:13:38,773 - INFO - 13:13:38  47              P_PAGE_SIZE IN NUMBER,
2025-05-13 13:13:38,774 - INFO - 13:13:38  48              P_BRANDING IN VARCHAR2,
2025-05-13 13:13:38,774 - INFO - 13:13:38  49              P_DATA OUT SYS_REFCURSOR
2025-05-13 13:13:38,774 - INFO - 13:13:38  50          );
2025-05-13 13:13:38,774 - INFO - 13:13:38  51
2025-05-13 13:13:38,774 - INFO - 13:13:38  52          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_ABLE_V1(
2025-05-13 13:13:38,775 - INFO - 13:13:38  53              P_MIN_SEQ_ID IN NUMBER,
2025-05-13 13:13:38,775 - INFO - 13:13:38  54              P_PAGE_SIZE IN NUMBER,
2025-05-13 13:13:38,775 - INFO - 13:13:38  55              P_BRANDING IN VARCHAR2,
2025-05-13 13:13:38,775 - INFO - 13:13:38  56              P_DATA OUT SYS_REFCURSOR
2025-05-13 13:13:38,776 - INFO - 13:13:38  57          );
2025-05-13 13:13:38,776 - INFO - 13:13:38  58
2025-05-13 13:13:38,776 - INFO - 13:13:38  59          PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_529(
2025-05-13 13:13:38,776 - INFO - 13:13:38  60              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
2025-05-13 13:13:38,776 - INFO - 13:13:38  61              P_BRANDING_IN IN VARCHAR2,
2025-05-13 13:13:38,776 - INFO - 13:13:38  62              P_CSR_ID IN VARCHAR2,
2025-05-13 13:13:38,777 - INFO - 13:13:38  63              P_UPDATE_MESSAGE OUT VARCHAR2
2025-05-13 13:13:38,777 - INFO - 13:13:38  64          );
2025-05-13 13:13:38,777 - INFO - 13:13:38  65
2025-05-13 13:13:38,777 - INFO - 13:13:38  66          PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_ABLE(
2025-05-13 13:13:38,777 - INFO - 13:13:38  67              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
2025-05-13 13:13:38,777 - INFO - 13:13:38  68              P_BRANDING_IN IN VARCHAR2,
2025-05-13 13:13:38,778 - INFO - 13:13:38  69              P_CSR_ID IN VARCHAR2,
2025-05-13 13:13:38,778 - INFO - 13:13:38  70              P_UPDATE_MESSAGE OUT VARCHAR2
2025-05-13 13:13:38,778 - INFO - 13:13:38  71          );
2025-05-13 13:13:38,778 - INFO - 13:13:38  72
2025-05-13 13:13:38,778 - INFO - 13:13:38  73          PROCEDURE IDP_SYNCDTTM_UPDATE(
2025-05-13 13:13:38,779 - INFO - 13:13:38  74              P_BRANDING_IN IN VARCHAR2,
2025-05-13 13:13:38,779 - INFO - 13:13:38  75              P_UUID_LOGIN_ID_IN IN VARCHAR2,
2025-05-13 13:13:38,779 - INFO - 13:13:38  76              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
2025-05-13 13:13:38,779 - INFO - 13:13:38  77              P_UPDATE_COUNT_OUT OUT NUMBER
2025-05-13 13:13:38,779 - INFO - 13:13:38  78          );
2025-05-13 13:13:38,779 - INFO - 13:13:38  79
2025-05-13 13:13:38,780 - INFO - 13:13:38  80          PROCEDURE IDP_SYNCDTTM_UPDATE_ABLE(
2025-05-13 13:13:38,780 - INFO - 13:13:38  81              P_BRANDING_IN IN VARCHAR2,
2025-05-13 13:13:38,780 - INFO - 13:13:38  82              P_UUID_LOGIN_ID_IN IN VARCHAR2,
2025-05-13 13:13:38,780 - INFO - 13:13:38  83              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
2025-05-13 13:13:38,780 - INFO - 13:13:38  84              P_UPDATE_COUNT_OUT OUT NUMBER
2025-05-13 13:13:38,781 - INFO - 13:13:38  85          );
2025-05-13 13:13:38,781 - INFO - 13:13:38  86
2025-05-13 13:13:38,781 - INFO - 13:13:38  87          PROCEDURE LOOKUP_PERSON_ACCOUNT_529(
2025-05-13 13:13:38,781 - INFO - 13:13:38  88              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,781 - INFO - 13:13:38  89              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST
2025-05-13 13:13:38,782 - INFO - 13:13:38  90          );
2025-05-13 13:13:38,782 - INFO - 13:13:38  91
2025-05-13 13:13:38,782 - INFO - 13:13:38  92          PROCEDURE UPDATE_PERSON_LAST4SSN_529(
2025-05-13 13:13:38,782 - INFO - 13:13:38  93              P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST
2025-05-13 13:13:38,782 - INFO - 13:13:38  94          );
2025-05-13 13:13:38,783 - INFO - 13:13:38  95
2025-05-13 13:13:38,783 - INFO - 13:13:38  96          PROCEDURE LOOKUP_IDP_WEB_ENABLED(
2025-05-13 13:13:38,783 - INFO - 13:13:38  97              P_BRANDING_IN IN VARCHAR2,
2025-05-13 13:13:38,783 - INFO - 13:13:38  98              P_IDP_WEB_ENABLED_OUT OUT VARCHAR2
2025-05-13 13:13:38,783 - INFO - 13:13:38  99          );
2025-05-13 13:13:38,785 - INFO - 13:13:38 100
2025-05-13 13:13:38,785 - INFO - 13:13:38 101          PROCEDURE UPDATE_PERSON_LAST4SSN_ABLE(
2025-05-13 13:13:38,785 - INFO - 13:13:38 102              P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST
2025-05-13 13:13:38,785 - INFO - 13:13:38 103          );
2025-05-13 13:13:38,786 - INFO - 13:13:38 104
2025-05-13 13:13:38,786 - INFO - 13:13:38 105          PROCEDURE LOOKUP_PERSON_ACCOUNT_ABLE(
2025-05-13 13:13:38,786 - INFO - 13:13:38 106              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,786 - INFO - 13:13:38 107              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST
2025-05-13 13:13:38,787 - INFO - 13:13:38 108          );
2025-05-13 13:13:38,787 - INFO - 13:13:38 109
2025-05-13 13:13:38,787 - INFO - 13:13:38 110
2025-05-13 13:13:38,787 - INFO - 13:13:38 111  END UP_IDP_SYNC;
2025-05-13 13:13:38,787 - INFO - 13:13:38 112  /
2025-05-13 13:13:38,789 - INFO -
2025-05-13 13:13:38,789 - INFO - Package created.
2025-05-13 13:13:38,790 - INFO -
2025-05-13 13:13:38,790 - INFO - Elapsed: 00:00:00.00
2025-05-13 13:13:38,790 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,790 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,790 - INFO - 13:13:38 uii0@UIIS03>
2025-05-13 13:13:38,790 - INFO - 13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
2025-05-13 13:13:38,791 - INFO - 13:13:38 uii0@UIIS03> -- Alter table/type
2025-05-13 13:13:38,791 - INFO - 13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
2025-05-13 13:13:38,791 - INFO - 13:13:38 uii0@UIIS03> create or replace PACKAGE BODY      UP_IDP_SYNC
2025-05-13 13:13:38,791 - INFO - 13:13:38   2  AS
2025-05-13 13:13:38,791 - INFO - 13:13:38   3      PROCEDURE LOOKUP_APPROVAL_STATUS_ABLE (
2025-05-13 13:13:38,791 - INFO - 13:13:38   4          P_BRANDING          IN VARCHAR2,
2025-05-13 13:13:38,791 - INFO - 13:13:38   5          P_USERNAME          IN VARCHAR2,
2025-05-13 13:13:38,792 - INFO - 13:13:38   6          P_APPROVAL_STATUS   OUT VARCHAR2
2025-05-13 13:13:38,792 - INFO - 13:13:38   7      )
2025-05-13 13:13:38,792 - INFO - 13:13:38   8      AS
2025-05-13 13:13:38,792 - INFO - 13:13:38   9  BEGIN
2025-05-13 13:13:38,792 - INFO - 13:13:38  10
2025-05-13 13:13:38,792 - INFO - 13:13:38  11  WITH T AS
2025-05-13 13:13:38,792 - INFO - 13:13:38  12           (
2025-05-13 13:13:38,793 - INFO - 13:13:38  13               SELECT O.ORG_STATUS,
2025-05-13 13:13:38,793 - INFO - 13:13:38  14                      O.CTL_REC_STAT,
2025-05-13 13:13:38,793 - INFO - 13:13:38  15                      A.AGENT_STATUS_CODE,
2025-05-13 13:13:38,793 - INFO - 13:13:38  16                      A.ROLE_TYPE_CODE,
2025-05-13 13:13:38,793 - INFO - 13:13:38  17                      P.CID_STATUS
2025-05-13 13:13:38,794 - INFO - 13:13:38  18               FROM TU_ORG_AGENT  A
2025-05-13 13:13:38,794 - INFO - 13:13:38  19                        JOIN TU_ORG O
2025-05-13 13:13:38,794 - INFO - 13:13:38  20                             ON A.SEQ_ORG_ID = O.SEQ_ORG_ID
2025-05-13 13:13:38,794 - INFO - 13:13:38  21                        JOIN TU_PERSON P
2025-05-13 13:13:38,794 - INFO - 13:13:38  22                             ON A.SEQ_PERSON_ID = P.SEQ_PERSON_ID
2025-05-13 13:13:38,794 - INFO - 13:13:38  23                        JOIN TU_MEMBER M
2025-05-13 13:13:38,795 - INFO - 13:13:38  24                             ON A.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,795 - INFO - 13:13:38  25                        JOIN TA_APP_CONTEXT C
2025-05-13 13:13:38,795 - INFO - 13:13:38  26                             ON M.UII_MEMBER_ID = C.APP_MEMBER_ID
2025-05-13 13:13:38,795 - INFO - 13:13:38  27                        JOIN TA_LOGIN L
2025-05-13 13:13:38,795 - INFO - 13:13:38  28                             ON L.LOGIN_ID = C.LOGIN_ID
2025-05-13 13:13:38,796 - INFO - 13:13:38  29                        JOIN TU_TRAUNCH T
2025-05-13 13:13:38,796 - INFO - 13:13:38  30                             ON T.TRAUNCH_ID = L.TRAUNCH_ID
2025-05-13 13:13:38,796 - INFO - 13:13:38  31               WHERE BRANDING = P_BRANDING
2025-05-13 13:13:38,796 - INFO - 13:13:38  32                 AND UPPER(L.USERNAME) = UPPER(P_USERNAME)
2025-05-13 13:13:38,796 - INFO - 13:13:38  33                 AND A.CTL_REC_STAT = 'A'
2025-05-13 13:13:38,796 - INFO - 13:13:38  34           )
2025-05-13 13:13:38,797 - INFO - 13:13:38  35  SELECT CASE
2025-05-13 13:13:38,797 - INFO - 13:13:38  36             -- if the org is in Pending status and is in interim/pending dashboard mode and user is CP
2025-05-13 13:13:38,797 - INFO - 13:13:38  37             WHEN T.ROLE_TYPE_CODE = 'CP' AND T.ORG_STATUS = 'PE' AND T.CTL_REC_STAT in ('I', 'A')
2025-05-13 13:13:38,797 - INFO - 13:13:38  38                 THEN
2025-05-13 13:13:38,797 - INFO - 13:13:38  39                 'true'
2025-05-13 13:13:38,798 - INFO - 13:13:38  40             ELSE -- Org is not in interim dashboard status
2025-05-13 13:13:38,798 - INFO - 13:13:38  41                 CASE WHEN T.AGENT_STATUS_CODE = 'AE' AND T.CID_STATUS = 'A'
2025-05-13 13:13:38,798 - INFO - 13:13:38  42                          THEN
2025-05-13 13:13:38,798 - INFO - 13:13:38  43                          'true'
2025-05-13 13:13:38,798 - INFO - 13:13:38  44                      ELSE
2025-05-13 13:13:38,798 - INFO - 13:13:38  45                          'false'
2025-05-13 13:13:38,799 - INFO - 13:13:38  46                     END
2025-05-13 13:13:38,799 - INFO - 13:13:38  47             END APPROVALSTATUS
2025-05-13 13:13:38,799 - INFO - 13:13:38  48  INTO P_APPROVAL_STATUS
2025-05-13 13:13:38,799 - INFO - 13:13:38  49  FROM T;
2025-05-13 13:13:38,799 - INFO - 13:13:38  50
2025-05-13 13:13:38,800 - INFO - 13:13:38  51  EXCEPTION
2025-05-13 13:13:38,800 - INFO - 13:13:38  52            WHEN NO_DATA_FOUND
2025-05-13 13:13:38,800 - INFO - 13:13:38  53            THEN  P_APPROVAL_STATUS := 'NO_DATA_FOUND';
2025-05-13 13:13:38,800 - INFO - 13:13:38  54
2025-05-13 13:13:38,800 - INFO - 13:13:38  55
2025-05-13 13:13:38,800 - INFO - 13:13:38  56  END LOOKUP_APPROVAL_STATUS_ABLE;
2025-05-13 13:13:38,800 - INFO - 13:13:38  57
2025-05-13 13:13:38,801 - INFO - 13:13:38  58    PROCEDURE LOOKUP_USERNAME_529(
2025-05-13 13:13:38,801 - INFO - 13:13:38  59          P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,801 - INFO - 13:13:38  60          P_USERNAME_OUT OUT UP_USERNAME_TYPE
2025-05-13 13:13:38,801 - INFO - 13:13:38  61      )
2025-05-13 13:13:38,801 - INFO - 13:13:38  62  AS
2025-05-13 13:13:38,801 - INFO - 13:13:38  63      V_UII_MEMBER_ID NUMBER(12);
2025-05-13 13:13:38,802 - INFO - 13:13:38  64      V_USERNAME VARCHAR2(50);
2025-05-13 13:13:38,802 - INFO - 13:13:38  65      V_UII_ACCT_ID VARCHAR2(9);
2025-05-13 13:13:38,802 - INFO - 13:13:38  66      V_UII_ACCT_EXT VARCHAR(2);
2025-05-13 13:13:38,802 - INFO - 13:13:38  67      V_UUID_LOGIN_ID RAW(16);
2025-05-13 13:13:38,802 - INFO - 13:13:38  68      V_UUID_MEMBER_ID RAW(16);
2025-05-13 13:13:38,802 - INFO - 13:13:38  69      V_MULTIPLE_ACCTS VARCHAR2(1);
2025-05-13 13:13:38,803 - INFO - 13:13:38  70  BEGIN
2025-05-13 13:13:38,803 - INFO - 13:13:38  71          V_MULTIPLE_ACCTS := 'N';
2025-05-13 13:13:38,803 - INFO - 13:13:38  72
2025-05-13 13:13:38,803 - INFO - 13:13:38  73          DBMS_OUTPUT.PUT_LINE
2025-05-13 13:13:38,803 - INFO - 13:13:38  74  ('p_acct_search_in.uii_acct_id - ' || P_ACCT_SEARCH_IN.UII_ACCT_ID);
2025-05-13 13:13:38,804 - INFO - 13:13:38  75          DBMS_OUTPUT.PUT_LINE
2025-05-13 13:13:38,804 - INFO - 13:13:38  76  ('p_acct_search_in.uii_acct_ext - ' || P_ACCT_SEARCH_IN.UII_ACCT_EXT);
2025-05-13 13:13:38,804 - INFO - 13:13:38  77
2025-05-13 13:13:38,804 - INFO - 13:13:38  78          IF
2025-05-13 13:13:38,804 - INFO - 13:13:38  79  P_ACCT_SEARCH_IN.UII_ACCT_ID IS NULL
2025-05-13 13:13:38,805 - INFO - 13:13:38  80          THEN
2025-05-13 13:13:38,805 - INFO - 13:13:38  81  SELECT DISTINCT USERNAME, UUID_LOGIN_ID, M.UUID_MEMBER_ID
2025-05-13 13:13:38,805 - INFO - 13:13:38  82  INTO V_USERNAME, V_UUID_LOGIN_ID, V_UUID_MEMBER_ID
2025-05-13 13:13:38,805 - INFO - 13:13:38  83  FROM TA_LOGIN L
2025-05-13 13:13:38,805 - INFO - 13:13:38  84           JOIN TA_APP_CONTEXT A
2025-05-13 13:13:38,805 - INFO - 13:13:38  85                ON L.LOGIN_ID = A.LOGIN_ID
2025-05-13 13:13:38,806 - INFO - 13:13:38  86           JOIN TU_MEMBER M
2025-05-13 13:13:38,806 - INFO - 13:13:38  87                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,806 - INFO - 13:13:38  88           JOIN TU_ACCT AC
2025-05-13 13:13:38,806 - INFO - 13:13:38  89                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,806 - INFO - 13:13:38  90           JOIN TU_TRAUNCH T
2025-05-13 13:13:38,806 - INFO - 13:13:38  91                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
2025-05-13 13:13:38,807 - INFO - 13:13:38  92           JOIN TU_PERSON P
2025-05-13 13:13:38,807 - INFO - 13:13:38  93                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
2025-05-13 13:13:38,807 - INFO - 13:13:38  94  WHERE P.LAST_4_SSN = P_ACCT_SEARCH_IN.LAST_4_SSN
2025-05-13 13:13:38,807 - INFO - 13:13:38  95    AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
2025-05-13 13:13:38,807 - INFO - 13:13:38  96    AND T.BRANDING = P_ACCT_SEARCH_IN.BRANDING;
2025-05-13 13:13:38,807 - INFO - 13:13:38  97  END IF;
2025-05-13 13:13:38,807 - INFO - 13:13:38  98
2025-05-13 13:13:38,808 - INFO - 13:13:38  99          IF
2025-05-13 13:13:38,808 - INFO - 13:13:38 100  P_ACCT_SEARCH_IN.UII_ACCT_ID IS NOT NULL
2025-05-13 13:13:38,808 - INFO - 13:13:38 101          THEN
2025-05-13 13:13:38,808 - INFO - 13:13:38 102  SELECT USERNAME, UUID_LOGIN_ID, M.UUID_MEMBER_ID
2025-05-13 13:13:38,808 - INFO - 13:13:38 103  INTO V_USERNAME, V_UUID_LOGIN_ID, V_UUID_MEMBER_ID
2025-05-13 13:13:38,808 - INFO - 13:13:38 104  FROM TA_LOGIN L
2025-05-13 13:13:38,809 - INFO - 13:13:38 105           JOIN TA_APP_CONTEXT A
2025-05-13 13:13:38,809 - INFO - 13:13:38 106                ON L.LOGIN_ID = A.LOGIN_ID
2025-05-13 13:13:38,809 - INFO - 13:13:38 107           JOIN TU_MEMBER M
2025-05-13 13:13:38,809 - INFO - 13:13:38 108                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,809 - INFO - 13:13:38 109           JOIN TU_ACCT AC
2025-05-13 13:13:38,809 - INFO - 13:13:38 110                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,810 - INFO - 13:13:38 111           JOIN TU_TRAUNCH T
2025-05-13 13:13:38,810 - INFO - 13:13:38 112                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
2025-05-13 13:13:38,810 - INFO - 13:13:38 113           JOIN TU_PERSON P
2025-05-13 13:13:38,810 - INFO - 13:13:38 114                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
2025-05-13 13:13:38,810 - INFO - 13:13:38 115  WHERE T.BRANDING = P_ACCT_SEARCH_IN.BRANDING
2025-05-13 13:13:38,810 - INFO - 13:13:38 116    AND AC.UII_ACCT_ID = P_ACCT_SEARCH_IN.UII_ACCT_ID
2025-05-13 13:13:38,811 - INFO - 13:13:38 117    AND AC.UII_ACCT_EXT = P_ACCT_SEARCH_IN.UII_ACCT_EXT;
2025-05-13 13:13:38,811 - INFO - 13:13:38 118  END IF;
2025-05-13 13:13:38,811 - INFO - 13:13:38 119
2025-05-13 13:13:38,811 - INFO - 13:13:38 120
2025-05-13 13:13:38,811 - INFO - 13:13:38 121          P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,811 - INFO - 13:13:38 122
2025-05-13 13:13:38,812 - INFO - 13:13:38 123  EXCEPTION
2025-05-13 13:13:38,812 - INFO - 13:13:38 124          WHEN NO_DATA_FOUND
2025-05-13 13:13:38,812 - INFO - 13:13:38 125              THEN
2025-05-13 13:13:38,812 - INFO - 13:13:38 126                  P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, NULL, NULL, NULL, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,812 - INFO - 13:13:38 127                  DBMS_OUTPUT.PUT_LINE
2025-05-13 13:13:38,812 - INFO - 13:13:38 128  ('NO_DATA_FOUND');
2025-05-13 13:13:38,813 - INFO - 13:13:38 129  WHEN TOO_MANY_ROWS
2025-05-13 13:13:38,813 - INFO - 13:13:38 130              THEN
2025-05-13 13:13:38,813 - INFO - 13:13:38 131                  V_MULTIPLE_ACCTS := 'Y';
2025-05-13 13:13:38,813 - INFO - 13:13:38 132                  P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,813 - INFO - 13:13:38 133                  DBMS_OUTPUT.PUT_LINE
2025-05-13 13:13:38,813 - INFO - 13:13:38 134  ('TOO_MANY_ROWS');
2025-05-13 13:13:38,813 - INFO - 13:13:38 135
2025-05-13 13:13:38,814 - INFO - 13:13:38 136  END LOOKUP_USERNAME_529;
2025-05-13 13:13:38,814 - INFO - 13:13:38 137
2025-05-13 13:13:38,814 - INFO - 13:13:38 138  PROCEDURE LOOKUP_USERNAME_ABLE(
2025-05-13 13:13:38,814 - INFO - 13:13:38 139      P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
2025-05-13 13:13:38,814 - INFO - 13:13:38 140      P_USERNAME_OUT OUT UP_USERNAME_TYPE )
2025-05-13 13:13:38,814 - INFO - 13:13:38 141  AS
2025-05-13 13:13:38,815 - INFO - 13:13:38 142    V_UII_MEMBER_ID NUMBER(12);
2025-05-13 13:13:38,815 - INFO - 13:13:38 143    V_USERNAME      VARCHAR2(50);
2025-05-13 13:13:38,815 - INFO - 13:13:38 144    V_UII_ACCT_ID   VARCHAR2(9);
2025-05-13 13:13:38,815 - INFO - 13:13:38 145    V_UII_ACCT_EXT  VARCHAR(2);
2025-05-13 13:13:38,815 - INFO - 13:13:38 146    V_UUID_LOGIN_ID RAW(16);
2025-05-13 13:13:38,815 - INFO - 13:13:38 147    V_UUID_MEMBER_ID RAW(16);
2025-05-13 13:13:38,816 - INFO - 13:13:38 148    V_MULTIPLE_ACCTS VARCHAR2(1);
2025-05-13 13:13:38,816 - INFO - 13:13:38 149  BEGIN
2025-05-13 13:13:38,816 - INFO - 13:13:38 150    V_MULTIPLE_ACCTS := 'N';
2025-05-13 13:13:38,816 - INFO - 13:13:38 151    DBMS_OUTPUT.PUT_LINE ('p_acct_search_in.uii_acct_id - ' || P_ACCT_SEARCH_IN.UII_ACCT_ID);
2025-05-13 13:13:38,816 - INFO - 13:13:38 152    DBMS_OUTPUT.PUT_LINE ('p_acct_search_in.uii_acct_ext - ' || P_ACCT_SEARCH_IN.UII_ACCT_EXT);
2025-05-13 13:13:38,816 - INFO - 13:13:38 153    IF P_ACCT_SEARCH_IN.UII_ACCT_ID IS NULL THEN
2025-05-13 13:13:38,817 - INFO - 13:13:38 154  SELECT DISTINCT USERNAME,
2025-05-13 13:13:38,817 - INFO - 13:13:38 155                  UUID_LOGIN_ID,
2025-05-13 13:13:38,817 - INFO - 13:13:38 156                  M.UUID_MEMBER_ID
2025-05-13 13:13:38,817 - INFO - 13:13:38 157  INTO V_USERNAME,
2025-05-13 13:13:38,817 - INFO - 13:13:38 158      V_UUID_LOGIN_ID,
2025-05-13 13:13:38,818 - INFO - 13:13:38 159      V_UUID_MEMBER_ID
2025-05-13 13:13:38,818 - INFO - 13:13:38 160  FROM TA_LOGIN L
2025-05-13 13:13:38,818 - INFO - 13:13:38 161           JOIN TA_APP_CONTEXT A
2025-05-13 13:13:38,818 - INFO - 13:13:38 162                ON L.LOGIN_ID = A.LOGIN_ID
2025-05-13 13:13:38,818 - INFO - 13:13:38 163           JOIN TU_MEMBER M
2025-05-13 13:13:38,818 - INFO - 13:13:38 164                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,818 - INFO - 13:13:38 165           JOIN TU_ACCT AC
2025-05-13 13:13:38,819 - INFO - 13:13:38 166                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,819 - INFO - 13:13:38 167           JOIN TU_TRAUNCH T
2025-05-13 13:13:38,819 - INFO - 13:13:38 168                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
2025-05-13 13:13:38,819 - INFO - 13:13:38 169           JOIN TU_PERSON P
2025-05-13 13:13:38,819 - INFO - 13:13:38 170                ON AC.SEQ_PART_ID  = P.SEQ_PERSON_ID
2025-05-13 13:13:38,819 - INFO - 13:13:38 171  WHERE P.LAST_4_SSN = P_ACCT_SEARCH_IN.LAST_4_SSN
2025-05-13 13:13:38,819 - INFO - 13:13:38 172    AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
2025-05-13 13:13:38,820 - INFO - 13:13:38 173    AND T.PRODUCT_TYPE = 'ABLE'
2025-05-13 13:13:38,820 - INFO - 13:13:38 174    AND T.BRANDING     = P_ACCT_SEARCH_IN.BRANDING;
2025-05-13 13:13:38,820 - INFO - 13:13:38 175  END IF;
2025-05-13 13:13:38,820 - INFO - 13:13:38 176    IF P_ACCT_SEARCH_IN.UII_ACCT_ID IS NOT NULL THEN
2025-05-13 13:13:38,820 - INFO - 13:13:38 177  SELECT USERNAME,
2025-05-13 13:13:38,821 - INFO - 13:13:38 178         UUID_LOGIN_ID,
2025-05-13 13:13:38,821 - INFO - 13:13:38 179         M.UUID_MEMBER_ID
2025-05-13 13:13:38,821 - INFO - 13:13:38 180  INTO V_USERNAME,
2025-05-13 13:13:38,821 - INFO - 13:13:38 181      V_UUID_LOGIN_ID,
2025-05-13 13:13:38,821 - INFO - 13:13:38 182      V_UUID_MEMBER_ID
2025-05-13 13:13:38,822 - INFO - 13:13:38 183  FROM TA_LOGIN L
2025-05-13 13:13:38,823 - INFO - 13:13:38 184           JOIN TA_APP_CONTEXT A
2025-05-13 13:13:38,823 - INFO - 13:13:38 185                ON L.LOGIN_ID = A.LOGIN_ID
2025-05-13 13:13:38,823 - INFO - 13:13:38 186           JOIN TU_MEMBER M
2025-05-13 13:13:38,823 - INFO - 13:13:38 187                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,823 - INFO - 13:13:38 188           JOIN TU_ACCT AC
2025-05-13 13:13:38,824 - INFO - 13:13:38 189                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,824 - INFO - 13:13:38 190           JOIN TU_TRAUNCH T
2025-05-13 13:13:38,824 - INFO - 13:13:38 191                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
2025-05-13 13:13:38,824 - INFO - 13:13:38 192           JOIN TU_PERSON P
2025-05-13 13:13:38,824 - INFO - 13:13:38 193                ON AC.SEQ_PART_ID   = P.SEQ_PERSON_ID
2025-05-13 13:13:38,824 - INFO - 13:13:38 194  WHERE T.BRANDING    = P_ACCT_SEARCH_IN.BRANDING
2025-05-13 13:13:38,825 - INFO - 13:13:38 195    AND AC.UII_ACCT_ID  = P_ACCT_SEARCH_IN.UII_ACCT_ID
2025-05-13 13:13:38,825 - INFO - 13:13:38 196    AND T.PRODUCT_TYPE = 'ABLE'
2025-05-13 13:13:38,825 - INFO - 13:13:38 197    AND AC.UII_ACCT_EXT = P_ACCT_SEARCH_IN.UII_ACCT_EXT;
2025-05-13 13:13:38,825 - INFO - 13:13:38 198  END IF;
2025-05-13 13:13:38,825 - INFO - 13:13:38 199    P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,825 - INFO - 13:13:38 200  EXCEPTION
2025-05-13 13:13:38,825 - INFO - 13:13:38 201  WHEN NO_DATA_FOUND THEN
2025-05-13 13:13:38,826 - INFO - 13:13:38 202    P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, NULL, NULL, NULL, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,826 - INFO - 13:13:38 203    DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
2025-05-13 13:13:38,826 - INFO - 13:13:38 204  WHEN TOO_MANY_ROWS THEN
2025-05-13 13:13:38,826 - INFO - 13:13:38 205    V_MULTIPLE_ACCTS := 'Y';
2025-05-13 13:13:38,826 - INFO - 13:13:38 206    P_USERNAME_OUT   := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
2025-05-13 13:13:38,826 - INFO - 13:13:38 207    DBMS_OUTPUT.PUT_LINE ('TOO_MANY_ROWS');
2025-05-13 13:13:38,827 - INFO - 13:13:38 208  END LOOKUP_USERNAME_ABLE;
2025-05-13 13:13:38,827 - INFO - 13:13:38 209
2025-05-13 13:13:38,827 - INFO - 13:13:38 210
2025-05-13 13:13:38,827 - INFO - 13:13:38 211    PROCEDURE LOOKUP_PROFILE_529(
2025-05-13 13:13:38,827 - INFO - 13:13:38 212          P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
2025-05-13 13:13:38,827 - INFO - 13:13:38 213          P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
2025-05-13 13:13:38,828 - INFO - 13:13:38 214      )
2025-05-13 13:13:38,828 - INFO - 13:13:38 215  AS
2025-05-13 13:13:38,828 - INFO - 13:13:38 216      V_PROFILE_TYPE UP_PROFILE_LOOKUP_TYPE;
2025-05-13 13:13:38,828 - INFO - 13:13:38 217      V_CREDENTIAL_TYPE UP_CREDENTIAL_TYPE;
2025-05-13 13:13:38,828 - INFO - 13:13:38 218  BEGIN
2025-05-13 13:13:38,828 - INFO - 13:13:38 219  SELECT
2025-05-13 13:13:38,829 - INFO - 13:13:38 220      UP_PROFILE_LOOKUP_TYPE(M.UUID_MEMBER_ID,
2025-05-13 13:13:38,829 - INFO - 13:13:38 221                             P.FIRST_NAME,
2025-05-13 13:13:38,829 - INFO - 13:13:38 222                             P.LAST_NAME,
2025-05-13 13:13:38,829 - INFO - 13:13:38 223                             M.EMAIL,
2025-05-13 13:13:38,829 - INFO - 13:13:38 224                             NVL(NVL(P.E164_HOME_PHONE, P.HOME_PHONE), ''),
2025-05-13 13:13:38,829 - INFO - 13:13:38 225                             NVL(NVL(P.E164_WORK_PHONE, P.WORK_PHONE), ''),
2025-05-13 13:13:38,830 - INFO - 13:13:38 226                             'y',
2025-05-13 13:13:38,830 - INFO - 13:13:38 227                             L.IDP_SYNC_DTTM),
2025-05-13 13:13:38,830 - INFO - 13:13:38 228      UP_CREDENTIAL_TYPE(L.UUID_LOGIN_ID,
2025-05-13 13:13:38,830 - INFO - 13:13:38 229                         P_USERNAME_SEARCH_IN.USERNAME,
2025-05-13 13:13:38,830 - INFO - 13:13:38 230                         L.E_PWD,
2025-05-13 13:13:38,830 - INFO - 13:13:38 231                         L.PWD_CI)
2025-05-13 13:13:38,831 - INFO - 13:13:38 232  INTO
2025-05-13 13:13:38,831 - INFO - 13:13:38 233      V_PROFILE_TYPE,
2025-05-13 13:13:38,831 - INFO - 13:13:38 234      V_CREDENTIAL_TYPE
2025-05-13 13:13:38,831 - INFO - 13:13:38 235  FROM TA_LOGIN L
2025-05-13 13:13:38,831 - INFO - 13:13:38 236           JOIN TA_APP_CONTEXT A
2025-05-13 13:13:38,831 - INFO - 13:13:38 237                ON L.LOGIN_ID = A.LOGIN_ID
2025-05-13 13:13:38,832 - INFO - 13:13:38 238                    AND L.USERNAME = P_USERNAME_SEARCH_IN.USERNAME
2025-05-13 13:13:38,832 - INFO - 13:13:38 239           JOIN TU_MEMBER M
2025-05-13 13:13:38,832 - INFO - 13:13:38 240                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,832 - INFO - 13:13:38 241           JOIN TU_ACCT AC
2025-05-13 13:13:38,832 - INFO - 13:13:38 242                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
2025-05-13 13:13:38,833 - INFO - 13:13:38 243           JOIN TU_TRAUNCH T
2025-05-13 13:13:38,833 - INFO - 13:13:38 244                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
2025-05-13 13:13:38,833 - INFO - 13:13:38 245                    AND T.BRANDING = P_USERNAME_SEARCH_IN.BRANDING
2025-05-13 13:13:38,833 - INFO - 13:13:38 246           JOIN TU_PERSON P
2025-05-13 13:13:38,833 - INFO - 13:13:38 247                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
2025-05-13 13:13:38,833 - INFO - 13:13:38 248  WHERE ROWNUM = 1;
2025-05-13 13:13:38,834 - INFO - 13:13:38 249
2025-05-13 13:13:38,834 - INFO - 13:13:38 250  P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
2025-05-13 13:13:38,834 - INFO - 13:13:38 251
2025-05-13 13:13:38,834 - INFO - 13:13:38 252  EXCEPTION
2025-05-13 13:13:38,834 - INFO - 13:13:38 253        WHEN NO_DATA_FOUND
2025-05-13 13:13:38,834 - INFO - 13:13:38 254        THEN
2025-05-13 13:13:38,834 - INFO - 13:13:38 255            V_PROFILE_TYPE := UP_PROFILE_LOOKUP_TYPE(NULL, NULL, NULL, NULL, NULL, NULL, 'y', NULL);
2025-05-13 13:13:38,835 - INFO - 13:13:38 256            V_CREDENTIAL_TYPE := UP_CREDENTIAL_TYPE(NULL, NULL, NULL, NULL);
2025-05-13 13:13:38,835 - INFO - 13:13:38 257            P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
2025-05-13 13:13:38,835 - INFO - 13:13:38 258            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
2025-05-13 13:13:38,835 - INFO - Job PR_104699: SUCCESS
2025-05-13 13:13:43,847 - ERROR - Post-check failed: check_no_ora_errors


oracle@oemgridwt1:/dba_work_area/PRs/96.0/logs/uiis03 > cat 96.0_pr_104699.log
13:13:38 uii0@UIIS03> -- Spool output End
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- @Dylan
13:13:38 uii0@UIIS03> exec prt ('104699', '96.0');
COUNT :1

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.01
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- Run as uii0
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Create table/type
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> create or replace PACKAGE UP_IDP_SYNC AS
13:13:38   2         PROCEDURE LOOKUP_APPROVAL_STATUS_ABLE(
13:13:38   3              P_BRANDING          IN  VARCHAR2,
13:13:38   4              P_USERNAME        IN VARCHAR2,
13:13:38   5              P_APPROVAL_STATUS OUT VARCHAR2
13:13:38   6         );
13:13:38   7
13:13:38   8
13:13:38   9         PROCEDURE LOOKUP_USERNAME_529(
13:13:38  10              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38  11              P_USERNAME_OUT OUT UP_USERNAME_TYPE
13:13:38  12          );
13:13:38  13
13:13:38  14          PROCEDURE LOOKUP_USERNAME_ABLE(
13:13:38  15              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38  16              P_USERNAME_OUT OUT UP_USERNAME_TYPE
13:13:38  17          );
13:13:38  18
13:13:38  19          PROCEDURE LOOKUP_PROFILE_529(
13:13:38  20              P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
13:13:38  21              P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
13:13:38  22          );
13:13:38  23
13:13:38  24          PROCEDURE LOOKUP_PROFILE_ABLE(
13:13:38  25              P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
13:13:38  26              P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
13:13:38  27          );
13:13:38  28
13:13:38  29          PROCEDURE IDP_SYNC_ADD_CONFIRM_NOTIFY (
13:13:38  30              P_CHANGE_ID   IN TU_CONFIRM.CHANGE_ID%TYPE,
13:13:38  31              P_CTYPE       IN TU_CONFIRM.CTYPE%TYPE,
13:13:38  32              P_SUPPRESS    IN TU_CONFIRM.SUPPRESS%TYPE,
13:13:38  33              P_STYLE       IN TU_CONFIRM.STYLE%TYPE,
13:13:38  34              P_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE,
13:13:38  35              P_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE,
13:13:38  36              P_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE,
13:13:38  37              P_CSR_ID          TU_PERSON.CSR_ID%TYPE
13:13:38  38          );
13:13:38  39
13:13:38  40          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529(
13:13:38  41              P_ACCT_CONV_SEARCH_IN IN UP_ACCOUNT_CONVERSION_SEARCH_TYPE,
13:13:38  42              P_PROFILE_OUT_LIST OUT UP_CONV_ACCT_TYPE
13:13:38  43          );
13:13:38  44
13:13:38  45          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529_V1(
13:13:38  46              P_MIN_SEQ_ID IN NUMBER,
13:13:38  47              P_PAGE_SIZE IN NUMBER,
13:13:38  48              P_BRANDING IN VARCHAR2,
13:13:38  49              P_DATA OUT SYS_REFCURSOR
13:13:38  50          );
13:13:38  51
13:13:38  52          PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_ABLE_V1(
13:13:38  53              P_MIN_SEQ_ID IN NUMBER,
13:13:38  54              P_PAGE_SIZE IN NUMBER,
13:13:38  55              P_BRANDING IN VARCHAR2,
13:13:38  56              P_DATA OUT SYS_REFCURSOR
13:13:38  57          );
13:13:38  58
13:13:38  59          PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_529(
13:13:38  60              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
13:13:38  61              P_BRANDING_IN IN VARCHAR2,
13:13:38  62              P_CSR_ID IN VARCHAR2,
13:13:38  63              P_UPDATE_MESSAGE OUT VARCHAR2
13:13:38  64          );
13:13:38  65
13:13:38  66          PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_ABLE(
13:13:38  67              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
13:13:38  68              P_BRANDING_IN IN VARCHAR2,
13:13:38  69              P_CSR_ID IN VARCHAR2,
13:13:38  70              P_UPDATE_MESSAGE OUT VARCHAR2
13:13:38  71          );
13:13:38  72
13:13:38  73          PROCEDURE IDP_SYNCDTTM_UPDATE(
13:13:38  74              P_BRANDING_IN IN VARCHAR2,
13:13:38  75              P_UUID_LOGIN_ID_IN IN VARCHAR2,
13:13:38  76              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
13:13:38  77              P_UPDATE_COUNT_OUT OUT NUMBER
13:13:38  78          );
13:13:38  79
13:13:38  80          PROCEDURE IDP_SYNCDTTM_UPDATE_ABLE(
13:13:38  81              P_BRANDING_IN IN VARCHAR2,
13:13:38  82              P_UUID_LOGIN_ID_IN IN VARCHAR2,
13:13:38  83              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
13:13:38  84              P_UPDATE_COUNT_OUT OUT NUMBER
13:13:38  85          );
13:13:38  86
13:13:38  87          PROCEDURE LOOKUP_PERSON_ACCOUNT_529(
13:13:38  88              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38  89              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST
13:13:38  90          );
13:13:38  91
13:13:38  92          PROCEDURE UPDATE_PERSON_LAST4SSN_529(
13:13:38  93              P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST
13:13:38  94          );
13:13:38  95
13:13:38  96          PROCEDURE LOOKUP_IDP_WEB_ENABLED(
13:13:38  97              P_BRANDING_IN IN VARCHAR2,
13:13:38  98              P_IDP_WEB_ENABLED_OUT OUT VARCHAR2
13:13:38  99          );
13:13:38 100
13:13:38 101          PROCEDURE UPDATE_PERSON_LAST4SSN_ABLE(
13:13:38 102              P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST
13:13:38 103          );
13:13:38 104
13:13:38 105          PROCEDURE LOOKUP_PERSON_ACCOUNT_ABLE(
13:13:38 106              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38 107              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST
13:13:38 108          );
13:13:38 109
13:13:38 110
13:13:38 111  END UP_IDP_SYNC;
13:13:38 112  /

Package created.

Elapsed: 00:00:00.00
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Alter table/type
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> create or replace PACKAGE BODY      UP_IDP_SYNC
13:13:38   2  AS
13:13:38   3      PROCEDURE LOOKUP_APPROVAL_STATUS_ABLE (
13:13:38   4          P_BRANDING          IN VARCHAR2,
13:13:38   5          P_USERNAME          IN VARCHAR2,
13:13:38   6          P_APPROVAL_STATUS   OUT VARCHAR2
13:13:38   7      )
13:13:38   8      AS
13:13:38   9  BEGIN
13:13:38  10
13:13:38  11  WITH T AS
13:13:38  12           (
13:13:38  13               SELECT O.ORG_STATUS,
13:13:38  14                      O.CTL_REC_STAT,
13:13:38  15                      A.AGENT_STATUS_CODE,
13:13:38  16                      A.ROLE_TYPE_CODE,
13:13:38  17                      P.CID_STATUS
13:13:38  18               FROM TU_ORG_AGENT  A
13:13:38  19                        JOIN TU_ORG O
13:13:38  20                             ON A.SEQ_ORG_ID = O.SEQ_ORG_ID
13:13:38  21                        JOIN TU_PERSON P
13:13:38  22                             ON A.SEQ_PERSON_ID = P.SEQ_PERSON_ID
13:13:38  23                        JOIN TU_MEMBER M
13:13:38  24                             ON A.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38  25                        JOIN TA_APP_CONTEXT C
13:13:38  26                             ON M.UII_MEMBER_ID = C.APP_MEMBER_ID
13:13:38  27                        JOIN TA_LOGIN L
13:13:38  28                             ON L.LOGIN_ID = C.LOGIN_ID
13:13:38  29                        JOIN TU_TRAUNCH T
13:13:38  30                             ON T.TRAUNCH_ID = L.TRAUNCH_ID
13:13:38  31               WHERE BRANDING = P_BRANDING
13:13:38  32                 AND UPPER(L.USERNAME) = UPPER(P_USERNAME)
13:13:38  33                 AND A.CTL_REC_STAT = 'A'
13:13:38  34           )
13:13:38  35  SELECT CASE
13:13:38  36             -- if the org is in Pending status and is in interim/pending dashboard mode and user is CP
13:13:38  37             WHEN T.ROLE_TYPE_CODE = 'CP' AND T.ORG_STATUS = 'PE' AND T.CTL_REC_STAT in ('I', 'A')
13:13:38  38                 THEN
13:13:38  39                 'true'
13:13:38  40             ELSE -- Org is not in interim dashboard status
13:13:38  41                 CASE WHEN T.AGENT_STATUS_CODE = 'AE' AND T.CID_STATUS = 'A'
13:13:38  42                          THEN
13:13:38  43                          'true'
13:13:38  44                      ELSE
13:13:38  45                          'false'
13:13:38  46                     END
13:13:38  47             END APPROVALSTATUS
13:13:38  48  INTO P_APPROVAL_STATUS
13:13:38  49  FROM T;
13:13:38  50
13:13:38  51  EXCEPTION
13:13:38  52            WHEN NO_DATA_FOUND
13:13:38  53            THEN  P_APPROVAL_STATUS := 'NO_DATA_FOUND';
13:13:38  54
13:13:38  55
13:13:38  56  END LOOKUP_APPROVAL_STATUS_ABLE;
13:13:38  57
13:13:38  58    PROCEDURE LOOKUP_USERNAME_529(
13:13:38  59          P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38  60          P_USERNAME_OUT OUT UP_USERNAME_TYPE
13:13:38  61      )
13:13:38  62  AS
13:13:38  63      V_UII_MEMBER_ID NUMBER(12);
13:13:38  64      V_USERNAME VARCHAR2(50);
13:13:38  65      V_UII_ACCT_ID VARCHAR2(9);
13:13:38  66      V_UII_ACCT_EXT VARCHAR(2);
13:13:38  67      V_UUID_LOGIN_ID RAW(16);
13:13:38  68      V_UUID_MEMBER_ID RAW(16);
13:13:38  69      V_MULTIPLE_ACCTS VARCHAR2(1);
13:13:38  70  BEGIN
13:13:38  71          V_MULTIPLE_ACCTS := 'N';
13:13:38  72
13:13:38  73          DBMS_OUTPUT.PUT_LINE
13:13:38  74  ('p_acct_search_in.uii_acct_id - ' || P_ACCT_SEARCH_IN.UII_ACCT_ID);
13:13:38  75          DBMS_OUTPUT.PUT_LINE
13:13:38  76  ('p_acct_search_in.uii_acct_ext - ' || P_ACCT_SEARCH_IN.UII_ACCT_EXT);
13:13:38  77
13:13:38  78          IF
13:13:38  79  P_ACCT_SEARCH_IN.UII_ACCT_ID IS NULL
13:13:38  80          THEN
13:13:38  81  SELECT DISTINCT USERNAME, UUID_LOGIN_ID, M.UUID_MEMBER_ID
13:13:38  82  INTO V_USERNAME, V_UUID_LOGIN_ID, V_UUID_MEMBER_ID
13:13:38  83  FROM TA_LOGIN L
13:13:38  84           JOIN TA_APP_CONTEXT A
13:13:38  85                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38  86           JOIN TU_MEMBER M
13:13:38  87                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38  88           JOIN TU_ACCT AC
13:13:38  89                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38  90           JOIN TU_TRAUNCH T
13:13:38  91                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38  92           JOIN TU_PERSON P
13:13:38  93                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38  94  WHERE P.LAST_4_SSN = P_ACCT_SEARCH_IN.LAST_4_SSN
13:13:38  95    AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
13:13:38  96    AND T.BRANDING = P_ACCT_SEARCH_IN.BRANDING;
13:13:38  97  END IF;
13:13:38  98
13:13:38  99          IF
13:13:38 100  P_ACCT_SEARCH_IN.UII_ACCT_ID IS NOT NULL
13:13:38 101          THEN
13:13:38 102  SELECT USERNAME, UUID_LOGIN_ID, M.UUID_MEMBER_ID
13:13:38 103  INTO V_USERNAME, V_UUID_LOGIN_ID, V_UUID_MEMBER_ID
13:13:38 104  FROM TA_LOGIN L
13:13:38 105           JOIN TA_APP_CONTEXT A
13:13:38 106                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 107           JOIN TU_MEMBER M
13:13:38 108                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 109           JOIN TU_ACCT AC
13:13:38 110                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 111           JOIN TU_TRAUNCH T
13:13:38 112                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 113           JOIN TU_PERSON P
13:13:38 114                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 115  WHERE T.BRANDING = P_ACCT_SEARCH_IN.BRANDING
13:13:38 116    AND AC.UII_ACCT_ID = P_ACCT_SEARCH_IN.UII_ACCT_ID
13:13:38 117    AND AC.UII_ACCT_EXT = P_ACCT_SEARCH_IN.UII_ACCT_EXT;
13:13:38 118  END IF;
13:13:38 119
13:13:38 120
13:13:38 121          P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
13:13:38 122
13:13:38 123  EXCEPTION
13:13:38 124          WHEN NO_DATA_FOUND
13:13:38 125              THEN
13:13:38 126                  P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, NULL, NULL, NULL, V_MULTIPLE_ACCTS);
13:13:38 127                  DBMS_OUTPUT.PUT_LINE
13:13:38 128  ('NO_DATA_FOUND');
13:13:38 129  WHEN TOO_MANY_ROWS
13:13:38 130              THEN
13:13:38 131                  V_MULTIPLE_ACCTS := 'Y';
13:13:38 132                  P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
13:13:38 133                  DBMS_OUTPUT.PUT_LINE
13:13:38 134  ('TOO_MANY_ROWS');
13:13:38 135
13:13:38 136  END LOOKUP_USERNAME_529;
13:13:38 137
13:13:38 138  PROCEDURE LOOKUP_USERNAME_ABLE(
13:13:38 139      P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38 140      P_USERNAME_OUT OUT UP_USERNAME_TYPE )
13:13:38 141  AS
13:13:38 142    V_UII_MEMBER_ID NUMBER(12);
13:13:38 143    V_USERNAME      VARCHAR2(50);
13:13:38 144    V_UII_ACCT_ID   VARCHAR2(9);
13:13:38 145    V_UII_ACCT_EXT  VARCHAR(2);
13:13:38 146    V_UUID_LOGIN_ID RAW(16);
13:13:38 147    V_UUID_MEMBER_ID RAW(16);
13:13:38 148    V_MULTIPLE_ACCTS VARCHAR2(1);
13:13:38 149  BEGIN
13:13:38 150    V_MULTIPLE_ACCTS := 'N';
13:13:38 151    DBMS_OUTPUT.PUT_LINE ('p_acct_search_in.uii_acct_id - ' || P_ACCT_SEARCH_IN.UII_ACCT_ID);
13:13:38 152    DBMS_OUTPUT.PUT_LINE ('p_acct_search_in.uii_acct_ext - ' || P_ACCT_SEARCH_IN.UII_ACCT_EXT);
13:13:38 153    IF P_ACCT_SEARCH_IN.UII_ACCT_ID IS NULL THEN
13:13:38 154  SELECT DISTINCT USERNAME,
13:13:38 155                  UUID_LOGIN_ID,
13:13:38 156                  M.UUID_MEMBER_ID
13:13:38 157  INTO V_USERNAME,
13:13:38 158      V_UUID_LOGIN_ID,
13:13:38 159      V_UUID_MEMBER_ID
13:13:38 160  FROM TA_LOGIN L
13:13:38 161           JOIN TA_APP_CONTEXT A
13:13:38 162                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 163           JOIN TU_MEMBER M
13:13:38 164                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 165           JOIN TU_ACCT AC
13:13:38 166                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 167           JOIN TU_TRAUNCH T
13:13:38 168                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 169           JOIN TU_PERSON P
13:13:38 170                ON AC.SEQ_PART_ID  = P.SEQ_PERSON_ID
13:13:38 171  WHERE P.LAST_4_SSN = P_ACCT_SEARCH_IN.LAST_4_SSN
13:13:38 172    AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
13:13:38 173    AND T.PRODUCT_TYPE = 'ABLE'
13:13:38 174    AND T.BRANDING     = P_ACCT_SEARCH_IN.BRANDING;
13:13:38 175  END IF;
13:13:38 176    IF P_ACCT_SEARCH_IN.UII_ACCT_ID IS NOT NULL THEN
13:13:38 177  SELECT USERNAME,
13:13:38 178         UUID_LOGIN_ID,
13:13:38 179         M.UUID_MEMBER_ID
13:13:38 180  INTO V_USERNAME,
13:13:38 181      V_UUID_LOGIN_ID,
13:13:38 182      V_UUID_MEMBER_ID
13:13:38 183  FROM TA_LOGIN L
13:13:38 184           JOIN TA_APP_CONTEXT A
13:13:38 185                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 186           JOIN TU_MEMBER M
13:13:38 187                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 188           JOIN TU_ACCT AC
13:13:38 189                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 190           JOIN TU_TRAUNCH T
13:13:38 191                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 192           JOIN TU_PERSON P
13:13:38 193                ON AC.SEQ_PART_ID   = P.SEQ_PERSON_ID
13:13:38 194  WHERE T.BRANDING    = P_ACCT_SEARCH_IN.BRANDING
13:13:38 195    AND AC.UII_ACCT_ID  = P_ACCT_SEARCH_IN.UII_ACCT_ID
13:13:38 196    AND T.PRODUCT_TYPE = 'ABLE'
13:13:38 197    AND AC.UII_ACCT_EXT = P_ACCT_SEARCH_IN.UII_ACCT_EXT;
13:13:38 198  END IF;
13:13:38 199    P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
13:13:38 200  EXCEPTION
13:13:38 201  WHEN NO_DATA_FOUND THEN
13:13:38 202    P_USERNAME_OUT := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, NULL, NULL, NULL, V_MULTIPLE_ACCTS);
13:13:38 203    DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 204  WHEN TOO_MANY_ROWS THEN
13:13:38 205    V_MULTIPLE_ACCTS := 'Y';
13:13:38 206    P_USERNAME_OUT   := UP_USERNAME_TYPE(P_ACCT_SEARCH_IN.BRANDING, V_USERNAME, V_UUID_MEMBER_ID, V_UUID_LOGIN_ID, V_MULTIPLE_ACCTS);
13:13:38 207    DBMS_OUTPUT.PUT_LINE ('TOO_MANY_ROWS');
13:13:38 208  END LOOKUP_USERNAME_ABLE;
13:13:38 209
13:13:38 210
13:13:38 211    PROCEDURE LOOKUP_PROFILE_529(
13:13:38 212          P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
13:13:38 213          P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
13:13:38 214      )
13:13:38 215  AS
13:13:38 216      V_PROFILE_TYPE UP_PROFILE_LOOKUP_TYPE;
13:13:38 217      V_CREDENTIAL_TYPE UP_CREDENTIAL_TYPE;
13:13:38 218  BEGIN
13:13:38 219  SELECT
13:13:38 220      UP_PROFILE_LOOKUP_TYPE(M.UUID_MEMBER_ID,
13:13:38 221                             P.FIRST_NAME,
13:13:38 222                             P.LAST_NAME,
13:13:38 223                             M.EMAIL,
13:13:38 224                             NVL(NVL(P.E164_HOME_PHONE, P.HOME_PHONE), ''),
13:13:38 225                             NVL(NVL(P.E164_WORK_PHONE, P.WORK_PHONE), ''),
13:13:38 226                             'y',
13:13:38 227                             L.IDP_SYNC_DTTM),
13:13:38 228      UP_CREDENTIAL_TYPE(L.UUID_LOGIN_ID,
13:13:38 229                         P_USERNAME_SEARCH_IN.USERNAME,
13:13:38 230                         L.E_PWD,
13:13:38 231                         L.PWD_CI)
13:13:38 232  INTO
13:13:38 233      V_PROFILE_TYPE,
13:13:38 234      V_CREDENTIAL_TYPE
13:13:38 235  FROM TA_LOGIN L
13:13:38 236           JOIN TA_APP_CONTEXT A
13:13:38 237                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 238                    AND L.USERNAME = P_USERNAME_SEARCH_IN.USERNAME
13:13:38 239           JOIN TU_MEMBER M
13:13:38 240                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 241           JOIN TU_ACCT AC
13:13:38 242                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 243           JOIN TU_TRAUNCH T
13:13:38 244                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 245                    AND T.BRANDING = P_USERNAME_SEARCH_IN.BRANDING
13:13:38 246           JOIN TU_PERSON P
13:13:38 247                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 248  WHERE ROWNUM = 1;
13:13:38 249
13:13:38 250  P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
13:13:38 251
13:13:38 252  EXCEPTION
13:13:38 253        WHEN NO_DATA_FOUND
13:13:38 254        THEN
13:13:38 255            V_PROFILE_TYPE := UP_PROFILE_LOOKUP_TYPE(NULL, NULL, NULL, NULL, NULL, NULL, 'y', NULL);
13:13:38 256            V_CREDENTIAL_TYPE := UP_CREDENTIAL_TYPE(NULL, NULL, NULL, NULL);
13:13:38 257            P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
13:13:38 258            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 259
13:13:38 260  END LOOKUP_PROFILE_529;
13:13:38 261
13:13:38 262  PROCEDURE LOOKUP_PROFILE_ABLE(
13:13:38 263          P_USERNAME_SEARCH_IN IN UP_PROFILE_SEARCH_TYPE,
13:13:38 264          P_PROFILE_OUT OUT UP_ACCOUNT_SYNC_TYPE
13:13:38 265      )
13:13:38 266  AS
13:13:38 267      V_PROFILE_TYPE UP_PROFILE_LOOKUP_TYPE;
13:13:38 268      V_CREDENTIAL_TYPE UP_CREDENTIAL_TYPE;
13:13:38 269  BEGIN
13:13:38 270  SELECT
13:13:38 271      UP_PROFILE_LOOKUP_TYPE(M.UUID_MEMBER_ID,
13:13:38 272                             P.FIRST_NAME,
13:13:38 273                             P.LAST_NAME,
13:13:38 274                             M.EMAIL,
13:13:38 275                             NVL(NVL(P.E164_HOME_PHONE, P.HOME_PHONE), ''),
13:13:38 276                             NVL(NVL(P.E164_WORK_PHONE, P.WORK_PHONE), ''),
13:13:38 277                             'y',
13:13:38 278                             L.IDP_SYNC_DTTM),
13:13:38 279      UP_CREDENTIAL_TYPE(L.UUID_LOGIN_ID,
13:13:38 280                         P_USERNAME_SEARCH_IN.USERNAME,
13:13:38 281                         L.E_PWD,
13:13:38 282                         L.PWD_CI)
13:13:38 283  INTO
13:13:38 284      V_PROFILE_TYPE,
13:13:38 285      V_CREDENTIAL_TYPE
13:13:38 286  FROM TA_LOGIN L
13:13:38 287           JOIN TA_APP_CONTEXT A
13:13:38 288                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 289                    AND L.USERNAME = P_USERNAME_SEARCH_IN.USERNAME
13:13:38 290           JOIN TU_MEMBER M
13:13:38 291                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 292           JOIN TU_ACCT AC
13:13:38 293                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 294           JOIN TU_TRAUNCH T
13:13:38 295                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 296                    AND T.BRANDING = P_USERNAME_SEARCH_IN.BRANDING
13:13:38 297           JOIN TU_PERSON P
13:13:38 298                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 299  WHERE ROWNUM = 1
13:13:38 300    AND T.PRODUCT_TYPE='ABLE';
13:13:38 301
13:13:38 302  P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
13:13:38 303
13:13:38 304  EXCEPTION
13:13:38 305        WHEN NO_DATA_FOUND
13:13:38 306        THEN
13:13:38 307            V_PROFILE_TYPE := UP_PROFILE_LOOKUP_TYPE(NULL, NULL, NULL, NULL, NULL, NULL, 'y', NULL);
13:13:38 308            V_CREDENTIAL_TYPE := UP_CREDENTIAL_TYPE(NULL, NULL, NULL, NULL);
13:13:38 309            P_PROFILE_OUT := UP_ACCOUNT_SYNC_TYPE(V_CREDENTIAL_TYPE, V_PROFILE_TYPE);
13:13:38 310            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 311
13:13:38 312  END LOOKUP_PROFILE_ABLE;
13:13:38 313
13:13:38 314    PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529(
13:13:38 315          P_ACCT_CONV_SEARCH_IN IN UP_ACCOUNT_CONVERSION_SEARCH_TYPE,
13:13:38 316          P_PROFILE_OUT_LIST OUT UP_CONV_ACCT_TYPE
13:13:38 317      )
13:13:38 318  AS
13:13:38 319      V_PROFILE_TYPE_LIST UP_PROFILE_TYPE_LIST;
13:13:38 320  BEGIN
13:13:38 321  WITH T_TRAUNCH AS (
13:13:38 322      SELECT TRAUNCH_ID
13:13:38 323      FROM TU_TRAUNCH T
13:13:38 324      WHERE T.BRANDING = P_ACCT_CONV_SEARCH_IN.BRANDING
13:13:38 325  ),
13:13:38 326       T_ACCT AS (
13:13:38 327           SELECT DISTINCT A.UII_MEMBER_ID, SEQ_PART_ID
13:13:38 328           FROM TU_ACCT A
13:13:38 329                    JOIN T_TRAUNCH T
13:13:38 330                         ON T.TRAUNCH_ID = A.TRAUNCH_ID
13:13:38 331       ),
13:13:38 332       T_MEMBER AS (
13:13:38 333           SELECT UUID_MEMBER_ID, UII_MEMBER_ID, EMAIL
13:13:38 334           FROM TU_MEMBER M
13:13:38 335           WHERE EXISTS (
13:13:38 336               SELECT 1
13:13:38 337               FROM T_ACCT A
13:13:38 338               WHERE A.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 339           )
13:13:38 340       ),
13:13:38 341       T_PERSON AS (
13:13:38 342           SELECT FIRST_NAME, LAST_NAME, HOME_PHONE, WORK_PHONE, UII_MEMBER_ID
13:13:38 343           FROM TU_PERSON P
13:13:38 344                    JOIN T_ACCT A
13:13:38 345                         ON A.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 346       )
13:13:38 347  SELECT
13:13:38 348      UP_PROFILE_TYPE (
13:13:38 349              L.UUID_LOGIN_ID,
13:13:38 350              L.USERNAME,
13:13:38 351              L.E_PWD,
13:13:38 352              L.PWD_CI,
13:13:38 353              M.UUID_MEMBER_ID,
13:13:38 354              P.FIRST_NAME,
13:13:38 355              P.LAST_NAME,
13:13:38 356              M.EMAIL,
13:13:38 357              P.HOME_PHONE,
13:13:38 358              P.WORK_PHONE )BULK COLLECT
13:13:38 359  INTO V_PROFILE_TYPE_LIST
13:13:38 360  FROM T_MEMBER M
13:13:38 361           JOIN TA_APP_CONTEXT AC
13:13:38 362                ON AC.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 363           JOIN TA_LOGIN L
13:13:38 364                ON L.LOGIN_ID = AC.LOGIN_ID
13:13:38 365           JOIN T_PERSON P
13:13:38 366                ON P.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 367  ;
13:13:38 368
13:13:38 369  P_PROFILE_OUT_LIST := UP_CONV_ACCT_TYPE(V_PROFILE_TYPE_LIST);
13:13:38 370
13:13:38 371  EXCEPTION
13:13:38 372        WHEN NO_DATA_FOUND
13:13:38 373        THEN
13:13:38 374            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 375
13:13:38 376  END LOOKUP_CONVERSION_ACCOUNTS_529;
13:13:38 377
13:13:38 378    PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_529_V1(
13:13:38 379          P_MIN_SEQ_ID IN NUMBER,
13:13:38 380          P_PAGE_SIZE IN NUMBER,
13:13:38 381          P_BRANDING IN VARCHAR2,
13:13:38 382          P_DATA OUT SYS_REFCURSOR
13:13:38 383      )
13:13:38 384  AS
13:13:38 385  --    v_offset NUMBER;
13:13:38 386  V_NEXTROWS NUMBER;
13:13:38 387  V_ORDERBY VARCHAR2(255);
13:13:38 388  BEGIN
13:13:38 389      IF P_PAGE_SIZE IS NULL
13:13:38 390      THEN
13:13:38 391          V_NEXTROWS := 1000;
13:13:38 392  ELSE
13:13:38 393          V_NEXTROWS := P_PAGE_SIZE;
13:13:38 394  END IF;
13:13:38 395  --    IF p_page_number IS NULL
13:13:38 396  --    THEN
13:13:38 397  --        v_offset := v_nextrows;
13:13:38 398  --    ELSE
13:13:38 399  --        v_offset := v_nextrows * (p_page_number - 1);
13:13:38 400  --    END IF;
13:13:38 401
13:13:38 402      V_ORDERBY := 'LOGIN_ID ASC';
13:13:38 403
13:13:38 404  --         OPEN P_DATA FOR
13:13:38 405  --              WITH T_DATA AS (
13:13:38 406  --            SELECT DISTINCT L.LOGIN_ID, M.UII_MEMBER_ID, P.SEQ_PERSON_ID
13:13:38 407  --              FROM TU_TRAUNCH T
13:13:38 408  --            JOIN TU_ACCT AC
13:13:38 409  --                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 410  --                AND T.BRANDING = P_BRANDING
13:13:38 411  --            JOIN TU_PERSON P
13:13:38 412  --                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 413  --            JOIN TU_MEMBER M
13:13:38 414  --                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 415  --            JOIN TA_APP_CONTEXT A
13:13:38 416  --                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 417  --            JOIN TA_LOGIN L
13:13:38 418  --                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 419  --                AND L.TRAUNCH_ID = T.TRAUNCH_ID
13:13:38 420  --            WHERE L.LOGIN_ID > P_MIN_SEQ_ID
13:13:38 421  --          )
13:13:38 422  --          SELECT  L.LOGIN_ID,
13:13:38 423  --               L.UUID_LOGIN_ID,
13:13:38 424  --               L.USERNAME,
13:13:38 425  --               L.E_PWD,
13:13:38 426  --               L.PWD_CI,
13:13:38 427  --               M.UUID_MEMBER_ID,
13:13:38 428  --               P.FIRST_NAME,
13:13:38 429  --               P.LAST_NAME,
13:13:38 430  --               M.EMAIL,
13:13:38 431  --               NVL(P.E164_HOME_PHONE, P.HOME_PHONE) HOME_PHONE,
13:13:38 432  --               NVL(P.E164_WORK_PHONE, P.WORK_PHONE) WORK_PHONE,
13:13:38 433  --            (SELECT COUNT(*) FROM T_DATA) AS ROWCOUNT
13:13:38 434  --          FROM T_DATA T
13:13:38 435  --        JOIN TA_LOGIN L
13:13:38 436  --            ON L.LOGIN_ID = T.LOGIN_ID
13:13:38 437  --        JOIN TU_MEMBER M
13:13:38 438  --            ON T.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 439  --        JOIN TU_PERSON P
13:13:38 440  --            ON T.SEQ_PERSON_ID = P.SEQ_PERSON_ID
13:13:38 441               --WHERE L.LOGIN_ID > P_MIN_SEQ_ID
13:13:38 442
13:13:38 443
13:13:38 444  OPEN P_DATA FOR
13:13:38 445          WITH T_DATA AS (SELECT DISTINCT L.LOGIN_ID, M.UII_MEMBER_ID, P.SEQ_PERSON_ID
13:13:38 446                  FROM TU_TRAUNCH T
13:13:38 447              JOIN TU_ACCT AC
13:13:38 448                  ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 449                  AND T.BRANDING = P_BRANDING
13:13:38 450              JOIN TU_PERSON P
13:13:38 451                  ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 452              JOIN TU_MEMBER M
13:13:38 453                  ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 454              JOIN TA_APP_CONTEXT A
13:13:38 455                  ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 456              JOIN TA_LOGIN L
13:13:38 457                  ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 458                  AND L.TRAUNCH_ID = T.TRAUNCH_ID
13:13:38 459              WHERE L.LOGIN_ID > P_MIN_SEQ_ID
13:13:38 460              AND L.IDP_SYNC_DTTM IS NULL
13:13:38 461              AND M.WEB_REGISTERED = 'Y')
13:13:38 462  SELECT DISTINCT L.LOGIN_ID,
13:13:38 463                  L.UUID_LOGIN_ID,
13:13:38 464                  L.USERNAME,
13:13:38 465                  L.E_PWD,
13:13:38 466                  L.PWD_CI,
13:13:38 467                  M.UUID_MEMBER_ID,
13:13:38 468                  P.FIRST_NAME,
13:13:38 469                  P.LAST_NAME,
13:13:38 470                  M.EMAIL,
13:13:38 471                  NVL(NVL(P.E164_HOME_PHONE, P.HOME_PHONE), '') HOME_PHONE,
13:13:38 472                  NVL(NVL(P.E164_WORK_PHONE, P.WORK_PHONE), '') WORK_PHONE,
13:13:38 473                  (SELECT COUNT(*) FROM T_DATA) AS ROWCOUNT
13:13:38 474  FROM T_DATA T
13:13:38 475           JOIN TA_LOGIN L
13:13:38 476                ON L.LOGIN_ID = T.LOGIN_ID
13:13:38 477           JOIN TA_APP_CONTEXT TA
13:13:38 478                ON TA.LOGIN_ID = L.LOGIN_ID
13:13:38 479           JOIN TU_MEMBER M
13:13:38 480                ON T.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 481                    AND M.UII_MEMBER_ID = TA.APP_MEMBER_ID
13:13:38 482           JOIN TU_ACCT A
13:13:38 483                ON A.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 484           JOIN TU_PERSON P
13:13:38 485                ON P.SEQ_PERSON_ID = A.SEQ_PART_ID
13:13:38 486                    AND  T.SEQ_PERSON_ID = P.SEQ_PERSON_ID
13:13:38 487
13:13:38 488  ORDER BY L.LOGIN_ID ASC
13:13:38 489  --        offset v_offset rows
13:13:38 490      FETCH FIRST V_NEXTROWS ROWS ONLY ;
13:13:38 491
13:13:38 492
13:13:38 493  EXCEPTION
13:13:38 494        WHEN NO_DATA_FOUND
13:13:38 495        THEN
13:13:38 496            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 497
13:13:38 498  END LOOKUP_CONVERSION_ACCOUNTS_529_V1;
13:13:38 499
13:13:38 500  PROCEDURE LOOKUP_CONVERSION_ACCOUNTS_ABLE_V1(
13:13:38 501          P_MIN_SEQ_ID IN NUMBER,
13:13:38 502          P_PAGE_SIZE IN NUMBER,
13:13:38 503          P_BRANDING IN VARCHAR2,
13:13:38 504          P_DATA OUT SYS_REFCURSOR
13:13:38 505      )
13:13:38 506  AS
13:13:38 507  --    v_offset NUMBER;
13:13:38 508  V_NEXTROWS NUMBER;
13:13:38 509  V_ORDERBY VARCHAR2(255);
13:13:38 510  BEGIN
13:13:38 511      IF P_PAGE_SIZE IS NULL
13:13:38 512      THEN
13:13:38 513          V_NEXTROWS := 1000;
13:13:38 514  ELSE
13:13:38 515          V_NEXTROWS := P_PAGE_SIZE;
13:13:38 516  END IF;
13:13:38 517      V_ORDERBY := 'LOGIN_ID ASC';
13:13:38 518
13:13:38 519  OPEN P_DATA FOR
13:13:38 520          WITH T_DATA AS (SELECT DISTINCT L.LOGIN_ID, M.UII_MEMBER_ID, P.SEQ_PERSON_ID
13:13:38 521                  FROM TU_TRAUNCH T
13:13:38 522              JOIN TU_ACCT AC
13:13:38 523                  ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 524                  AND T.BRANDING = P_BRANDING
13:13:38 525              JOIN TU_PERSON P
13:13:38 526                  ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 527              JOIN TU_MEMBER M
13:13:38 528                  ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 529              JOIN TA_APP_CONTEXT A
13:13:38 530                  ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 531              JOIN TA_LOGIN L
13:13:38 532                  ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 533                  AND L.TRAUNCH_ID = T.TRAUNCH_ID
13:13:38 534              WHERE L.LOGIN_ID > P_MIN_SEQ_ID
13:13:38 535              AND L.IDP_SYNC_DTTM IS NULL
13:13:38 536              AND M.WEB_REGISTERED = 'Y'
13:13:38 537              AND T.PRODUCT_TYPE = 'ABLE')
13:13:38 538  SELECT DISTINCT L.LOGIN_ID,
13:13:38 539                  L.UUID_LOGIN_ID,
13:13:38 540                  L.USERNAME,
13:13:38 541                  L.E_PWD,
13:13:38 542                  L.PWD_CI,
13:13:38 543                  M.UUID_MEMBER_ID,
13:13:38 544                  P.FIRST_NAME,
13:13:38 545                  P.LAST_NAME,
13:13:38 546                  M.EMAIL,
13:13:38 547                  NVL(NVL(P.E164_HOME_PHONE, P.HOME_PHONE), '') HOME_PHONE,
13:13:38 548                  NVL(NVL(P.E164_WORK_PHONE, P.WORK_PHONE), '') WORK_PHONE,
13:13:38 549                  (SELECT COUNT(*) FROM T_DATA) AS ROWCOUNT
13:13:38 550  FROM T_DATA T
13:13:38 551           JOIN TA_LOGIN L
13:13:38 552                ON L.LOGIN_ID = T.LOGIN_ID
13:13:38 553           JOIN TA_APP_CONTEXT TA
13:13:38 554                ON TA.LOGIN_ID = L.LOGIN_ID
13:13:38 555           JOIN TU_MEMBER M
13:13:38 556                ON T.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 557                    AND M.UII_MEMBER_ID = TA.APP_MEMBER_ID
13:13:38 558           JOIN TU_ACCT A
13:13:38 559                ON A.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 560           JOIN TU_PERSON P
13:13:38 561                ON P.SEQ_PERSON_ID = A.SEQ_PART_ID
13:13:38 562                    AND  T.SEQ_PERSON_ID = P.SEQ_PERSON_ID
13:13:38 563
13:13:38 564  ORDER BY L.LOGIN_ID ASC
13:13:38 565  --        offset v_offset rows
13:13:38 566      FETCH FIRST V_NEXTROWS ROWS ONLY ;
13:13:38 567
13:13:38 568
13:13:38 569  EXCEPTION
13:13:38 570        WHEN NO_DATA_FOUND
13:13:38 571        THEN
13:13:38 572            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 573
13:13:38 574  END LOOKUP_CONVERSION_ACCOUNTS_ABLE_V1;
13:13:38 575
13:13:38 576    PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_529(
13:13:38 577              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
13:13:38 578              P_BRANDING_IN IN VARCHAR2,
13:13:38 579              P_CSR_ID IN VARCHAR2,
13:13:38 580              P_UPDATE_MESSAGE OUT VARCHAR2
13:13:38 581          )
13:13:38 582  AS
13:13:38 583      V_CREDENTIAL_TYPE UP_CREDENTIAL_TYPE;
13:13:38 584      V_PROFILE_LOOKUP_TYPE UP_PROFILE_LOOKUP_TYPE;
13:13:38 585      V_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE;
13:13:38 586      V_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE;
13:13:38 587      V_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE;
13:13:38 588      V_CSR_ID          TU_PERSON.CSR_ID%TYPE;
13:13:38 589      V_IS_ORG_FLAG     TU_ACCT.IS_ORG_FLAG%TYPE;
13:13:38 590  BEGIN
13:13:38 591        V_CREDENTIAL_TYPE := P_ACCT_SYNC_IN.CREDENTIAL;
13:13:38 592        V_PROFILE_LOOKUP_TYPE := P_ACCT_SYNC_IN.PROFILE_LOOKUP;
13:13:38 593        V_CSR_ID := P_CSR_ID;
13:13:38 594
13:13:38 595        IF P_CSR_ID = '-1'
13:13:38 596        THEN
13:13:38 597          V_CSR_ID := NULL;
13:13:38 598  END IF;
13:13:38 599
13:13:38 600        --need 4 separate update for confirm for credential username/password, and profile number/email
13:13:38 601        --only update email or phone number if different from what is in the table
13:13:38 602        --check while it is not updating
13:13:38 603        DBMS_OUTPUT.PUT_LINE('profile_id - '||V_PROFILE_LOOKUP_TYPE.PROFILE_ID);
13:13:38 604        IF V_PROFILE_LOOKUP_TYPE.PROFILE_ID IS NOT NULL
13:13:38 605        THEN
13:13:38 606          DBMS_OUTPUT.PUT_LINE('v_profile_lookup_type');
13:13:38 607
13:13:38 608  SELECT M.UII_MEMBER_ID, AC.SEQ_ACCT_ID, P.SEQ_PERSON_ID, AC.IS_ORG_FLAG
13:13:38 609  INTO V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_IS_ORG_FLAG
13:13:38 610  FROM TU_MEMBER M
13:13:38 611           JOIN TU_ACCT AC
13:13:38 612                ON M.UII_MEMBER_ID = AC.UII_MEMBER_ID
13:13:38 613           JOIN TU_PERSON P
13:13:38 614                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 615  WHERE UUID_MEMBER_ID = UPPER(REPLACE(V_PROFILE_LOOKUP_TYPE.PROFILE_ID, '-', ''))
13:13:38 616    AND ROWNUM = 1;
13:13:38 617
13:13:38 618
13:13:38 619  IF V_PROFILE_LOOKUP_TYPE.EMAIL IS NOT NULL AND V_IS_ORG_FLAG != 1 THEN
13:13:38 620  UPDATE TU_MEMBER
13:13:38 621  SET EMAIL = V_PROFILE_LOOKUP_TYPE.EMAIL,
13:13:38 622      CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID,
13:13:38 623      CSR_ID = V_CSR_ID
13:13:38 624  WHERE UUID_MEMBER_ID = UPPER(REPLACE(V_PROFILE_LOOKUP_TYPE.PROFILE_ID, '-', ''));
13:13:38 625
13:13:38 626  IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'EML', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 627  END IF;
13:13:38 628
13:13:38 629  IF V_PROFILE_LOOKUP_TYPE.PHONE_NUMBER IS NOT NULL OR V_PROFILE_LOOKUP_TYPE.SECONDARY_PHONE_NUMBER IS NOT NULL THEN
13:13:38 630
13:13:38 631  UPDATE TU_PERSON
13:13:38 632  SET HOME_PHONE = SUBSTR(V_PROFILE_LOOKUP_TYPE.PHONE_NUMBER, -10),
13:13:38 633      WORK_PHONE = SUBSTR(V_PROFILE_LOOKUP_TYPE.SECONDARY_PHONE_NUMBER, -10),
13:13:38 634      CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID,
13:13:38 635      CSR_ID = V_CSR_ID
13:13:38 636  WHERE SEQ_PERSON_ID = V_PERSON_ID;
13:13:38 637
13:13:38 638  IF P_BRANDING_IN = 'patap' THEN
13:13:38 639            DBMS_OUTPUT.PUT_LINE('patap branding');
13:13:38 640  UPDATE TU_PERSON
13:13:38 641  SET CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID, SYNC_STATE = 'C'
13:13:38 642  WHERE SEQ_PERSON_ID = V_PERSON_ID;
13:13:38 643  END IF;
13:13:38 644
13:13:38 645  IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'CPT', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 646  END IF;
13:13:38 647
13:13:38 648  END IF;
13:13:38 649        DBMS_OUTPUT.PUT_LINE('profile logic done');
13:13:38 650
13:13:38 651        DBMS_OUTPUT.PUT_LINE('credential_id - '||V_CREDENTIAL_TYPE.CREDENTIAL_ID);
13:13:38 652        DBMS_OUTPUT.PUT_LINE('e_pwd - '||V_CREDENTIAL_TYPE.E_PWD);
13:13:38 653        DBMS_OUTPUT.PUT_LINE('pwd_ci - '||V_CREDENTIAL_TYPE.PWD_CI);
13:13:38 654
13:13:38 655        IF V_CREDENTIAL_TYPE.CREDENTIAL_ID IS NOT NULL
13:13:38 656        THEN
13:13:38 657        --update username and password
13:13:38 658          DBMS_OUTPUT.PUT_LINE('v_credential_type');
13:13:38 659  UPDATE TA_LOGIN
13:13:38 660  SET
13:13:38 661      E_PWD = V_CREDENTIAL_TYPE.E_PWD,
13:13:38 662      PWD_CI = V_CREDENTIAL_TYPE.PWD_CI,
13:13:38 663      CSR_ID = V_CSR_ID
13:13:38 664  WHERE UUID_LOGIN_ID = V_CREDENTIAL_TYPE.CREDENTIAL_ID;
13:13:38 665
13:13:38 666  DBMS_OUTPUT.PUT_LINE('v_credential_type updated');
13:13:38 667
13:13:38 668  SELECT M.UII_MEMBER_ID, AC.SEQ_ACCT_ID, P.SEQ_PERSON_ID
13:13:38 669  INTO V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID
13:13:38 670  FROM TU_MEMBER M
13:13:38 671           JOIN TU_ACCT AC
13:13:38 672                ON M.UII_MEMBER_ID = AC.UII_MEMBER_ID
13:13:38 673           JOIN TU_PERSON P
13:13:38 674                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 675           JOIN TA_APP_CONTEXT A
13:13:38 676                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 677           JOIN TA_LOGIN L
13:13:38 678                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 679  WHERE L.UUID_LOGIN_ID = V_CREDENTIAL_TYPE.CREDENTIAL_ID
13:13:38 680    AND ROWNUM = 1;
13:13:38 681
13:13:38 682  IF V_CREDENTIAL_TYPE.USERNAME IS NOT NULL
13:13:38 683          THEN
13:13:38 684            IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'UNC', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 685  END IF;
13:13:38 686          IF V_CREDENTIAL_TYPE.E_PWD IS NOT NULL
13:13:38 687          THEN
13:13:38 688            IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'PWC', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 689  END IF;
13:13:38 690
13:13:38 691  END IF;
13:13:38 692
13:13:38 693        DBMS_OUTPUT.PUT_LINE('credential logic done');
13:13:38 694
13:13:38 695        P_UPDATE_MESSAGE := 'SUCCESS';
13:13:38 696
13:13:38 697  EXCEPTION
13:13:38 698          WHEN NO_DATA_FOUND
13:13:38 699              THEN
13:13:38 700                  P_UPDATE_MESSAGE := 'NO_DATA_FOUND';
13:13:38 701                  DBMS_OUTPUT.PUT_LINE ( 'NO_DATA_FOUND');
13:13:38 702  WHEN OTHERS
13:13:38 703              THEN
13:13:38 704                  P_UPDATE_MESSAGE := SQLERRM;
13:13:38 705                  DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
13:13:38 706  END UPDATE_UNITE_ACCOUNT_SYNC_529;
13:13:38 707
13:13:38 708  PROCEDURE UPDATE_UNITE_ACCOUNT_SYNC_ABLE(
13:13:38 709              P_ACCT_SYNC_IN IN UP_ACCOUNT_SYNC_UPDATE_TYPE,
13:13:38 710              P_BRANDING_IN IN VARCHAR2,
13:13:38 711              P_CSR_ID IN VARCHAR2,
13:13:38 712              P_UPDATE_MESSAGE OUT VARCHAR2
13:13:38 713          )
13:13:38 714  AS
13:13:38 715      V_CREDENTIAL_TYPE UP_CREDENTIAL_TYPE;
13:13:38 716      V_PROFILE_LOOKUP_TYPE UP_PROFILE_LOOKUP_TYPE;
13:13:38 717      V_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE;
13:13:38 718      V_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE;
13:13:38 719      V_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE;
13:13:38 720      V_CSR_ID          TU_PERSON.CSR_ID%TYPE;
13:13:38 721      V_IS_ORG_FLAG     TU_ACCT.IS_ORG_FLAG%TYPE;
13:13:38 722  BEGIN
13:13:38 723        V_CREDENTIAL_TYPE := P_ACCT_SYNC_IN.CREDENTIAL;
13:13:38 724        V_PROFILE_LOOKUP_TYPE := P_ACCT_SYNC_IN.PROFILE_LOOKUP;
13:13:38 725        V_CSR_ID := P_CSR_ID;
13:13:38 726
13:13:38 727        IF P_CSR_ID = '-1'
13:13:38 728        THEN
13:13:38 729          V_CSR_ID := NULL;
13:13:38 730  END IF;
13:13:38 731
13:13:38 732        --need 4 separate update for confirm for credential username/password, and profile number/email
13:13:38 733        --only update email or phone number if different from what is in the table
13:13:38 734        --check while it is not updating
13:13:38 735        DBMS_OUTPUT.PUT_LINE('profile_id - '||V_PROFILE_LOOKUP_TYPE.PROFILE_ID);
13:13:38 736        IF V_PROFILE_LOOKUP_TYPE.PROFILE_ID IS NOT NULL
13:13:38 737        THEN
13:13:38 738          DBMS_OUTPUT.PUT_LINE('v_profile_lookup_type');
13:13:38 739
13:13:38 740  SELECT M.UII_MEMBER_ID, AC.SEQ_ACCT_ID, P.SEQ_PERSON_ID, AC.IS_ORG_FLAG
13:13:38 741  INTO V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_IS_ORG_FLAG
13:13:38 742  FROM TU_MEMBER M
13:13:38 743           JOIN TU_ACCT AC
13:13:38 744                ON M.UII_MEMBER_ID = AC.UII_MEMBER_ID
13:13:38 745           JOIN TU_PERSON P
13:13:38 746                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 747  WHERE UUID_MEMBER_ID = UPPER(REPLACE(V_PROFILE_LOOKUP_TYPE.PROFILE_ID, '-', ''))
13:13:38 748    AND ROWNUM = 1;
13:13:38 749
13:13:38 750
13:13:38 751  IF V_PROFILE_LOOKUP_TYPE.EMAIL IS NOT NULL AND V_IS_ORG_FLAG != 1 THEN
13:13:38 752  UPDATE TU_MEMBER
13:13:38 753  SET EMAIL = V_PROFILE_LOOKUP_TYPE.EMAIL,
13:13:38 754      CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID,
13:13:38 755      CSR_ID = V_CSR_ID
13:13:38 756  WHERE UUID_MEMBER_ID = UPPER(REPLACE(V_PROFILE_LOOKUP_TYPE.PROFILE_ID, '-', ''));
13:13:38 757
13:13:38 758  IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'EML', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 759  END IF;
13:13:38 760
13:13:38 761  IF V_PROFILE_LOOKUP_TYPE.PHONE_NUMBER IS NOT NULL OR V_PROFILE_LOOKUP_TYPE.SECONDARY_PHONE_NUMBER IS NOT NULL THEN
13:13:38 762
13:13:38 763  UPDATE TU_PERSON
13:13:38 764  SET HOME_PHONE = SUBSTR(V_PROFILE_LOOKUP_TYPE.PHONE_NUMBER, -10),
13:13:38 765      WORK_PHONE = SUBSTR(V_PROFILE_LOOKUP_TYPE.SECONDARY_PHONE_NUMBER, -10),
13:13:38 766      CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID,
13:13:38 767      CSR_ID = V_CSR_ID
13:13:38 768  WHERE SEQ_PERSON_ID = V_PERSON_ID;
13:13:38 769
13:13:38 770  IF P_BRANDING_IN = 'patap' THEN
13:13:38 771            DBMS_OUTPUT.PUT_LINE('patap branding');
13:13:38 772  UPDATE TU_PERSON
13:13:38 773  SET CHANGE_ID = P_ACCT_SYNC_IN.CHANGE_ID, SYNC_STATE = 'C'
13:13:38 774  WHERE SEQ_PERSON_ID = V_PERSON_ID;
13:13:38 775  END IF;
13:13:38 776
13:13:38 777  IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'CPT', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 778  END IF;
13:13:38 779
13:13:38 780  END IF;
13:13:38 781        DBMS_OUTPUT.PUT_LINE('profile logic done');
13:13:38 782
13:13:38 783        DBMS_OUTPUT.PUT_LINE('credential_id - '||V_CREDENTIAL_TYPE.CREDENTIAL_ID);
13:13:38 784        DBMS_OUTPUT.PUT_LINE('e_pwd - '||V_CREDENTIAL_TYPE.E_PWD);
13:13:38 785        DBMS_OUTPUT.PUT_LINE('pwd_ci - '||V_CREDENTIAL_TYPE.PWD_CI);
13:13:38 786
13:13:38 787        IF V_CREDENTIAL_TYPE.CREDENTIAL_ID IS NOT NULL
13:13:38 788        THEN
13:13:38 789        --update username and password
13:13:38 790          DBMS_OUTPUT.PUT_LINE('v_credential_type');
13:13:38 791  UPDATE TA_LOGIN
13:13:38 792  SET
13:13:38 793      E_PWD = V_CREDENTIAL_TYPE.E_PWD,
13:13:38 794      PWD_CI = V_CREDENTIAL_TYPE.PWD_CI,
13:13:38 795      CSR_ID = V_CSR_ID
13:13:38 796  WHERE UUID_LOGIN_ID = V_CREDENTIAL_TYPE.CREDENTIAL_ID;
13:13:38 797
13:13:38 798  DBMS_OUTPUT.PUT_LINE('v_credential_type updated');
13:13:38 799
13:13:38 800  SELECT M.UII_MEMBER_ID, AC.SEQ_ACCT_ID, P.SEQ_PERSON_ID
13:13:38 801  INTO V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID
13:13:38 802  FROM TU_MEMBER M
13:13:38 803           JOIN TU_ACCT AC
13:13:38 804                ON M.UII_MEMBER_ID = AC.UII_MEMBER_ID
13:13:38 805           JOIN TU_PERSON P
13:13:38 806                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 807           JOIN TA_APP_CONTEXT A
13:13:38 808                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 809           JOIN TA_LOGIN L
13:13:38 810                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 811  WHERE L.UUID_LOGIN_ID = V_CREDENTIAL_TYPE.CREDENTIAL_ID
13:13:38 812    AND ROWNUM = 1;
13:13:38 813
13:13:38 814  IF V_CREDENTIAL_TYPE.USERNAME IS NOT NULL
13:13:38 815          THEN
13:13:38 816            IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'UNC', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 817  END IF;
13:13:38 818          IF V_CREDENTIAL_TYPE.E_PWD IS NOT NULL
13:13:38 819          THEN
13:13:38 820            IDP_SYNC_ADD_CONFIRM_NOTIFY(P_ACCT_SYNC_IN.CHANGE_ID, 'PWC', NULL, NULL, V_MEMBER_ID, V_ACCT_ID, V_PERSON_ID, V_CSR_ID);
13:13:38 821  END IF;
13:13:38 822
13:13:38 823  END IF;
13:13:38 824
13:13:38 825        DBMS_OUTPUT.PUT_LINE('credential logic done');
13:13:38 826
13:13:38 827        P_UPDATE_MESSAGE := 'SUCCESS';
13:13:38 828
13:13:38 829  EXCEPTION
13:13:38 830          WHEN NO_DATA_FOUND
13:13:38 831              THEN
13:13:38 832                  P_UPDATE_MESSAGE := 'NO_DATA_FOUND';
13:13:38 833                  DBMS_OUTPUT.PUT_LINE ( 'NO_DATA_FOUND');
13:13:38 834  WHEN OTHERS
13:13:38 835              THEN
13:13:38 836                  P_UPDATE_MESSAGE := SQLERRM;
13:13:38 837                  DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
13:13:38 838  END UPDATE_UNITE_ACCOUNT_SYNC_ABLE;
13:13:38 839
13:13:38 840    PROCEDURE IDP_SYNC_ADD_CONFIRM_NOTIFY (
13:13:38 841      P_CHANGE_ID   TU_CONFIRM.CHANGE_ID%TYPE,
13:13:38 842      P_CTYPE       TU_CONFIRM.CTYPE%TYPE,
13:13:38 843      P_SUPPRESS    TU_CONFIRM.SUPPRESS%TYPE,
13:13:38 844      P_STYLE       TU_CONFIRM.STYLE%TYPE,
13:13:38 845      P_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE,
13:13:38 846      P_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE,
13:13:38 847      P_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE,
13:13:38 848      P_CSR_ID          TU_PERSON.CSR_ID%TYPE)
13:13:38 849  AS
13:13:38 850      V_DELIV_CONFIRM   VARCHAR (2);
13:13:38 851      V_SUPPRESS        TU_CONFIRM.SUPPRESS%TYPE;
13:13:38 852      V_STYLE           TU_CONFIRM.STYLE%TYPE;
13:13:38 853      V_CONFIRM_ID      TU_CONFIRM.SEQ_CONFIRM_ID%TYPE;
13:13:38 854      V_CTL_UPD_USER    VARCHAR(20);
13:13:38 855  --    V_MEMBER_ID       TU_MEMBER.UII_MEMBER_ID%TYPE;
13:13:38 856  --    V_ACCT_ID         TU_ACCT.SEQ_ACCT_ID%TYPE;
13:13:38 857      V_NOTIFY_ID       TU_NOTIFY.SEQ_NOTIFY_ID%TYPE;
13:13:38 858  --    V_PERSON_ID       TU_PERSON.SEQ_PERSON_ID%TYPE;
13:13:38 859      C_CTL_UPD_USER    VARCHAR2(20);
13:13:38 860  BEGIN
13:13:38 861  --    DBMS_OUTPUT.PUT_LINE ('*** ENROLLMENT_529_ADD_CONFIRM Procedure ***');
13:13:38 862  --
13:13:38 863  SELECT SEQ_CONFIRM_ID.NEXTVAL INTO V_CONFIRM_ID FROM DUAL;
13:13:38 864
13:13:38 865  SELECT USER INTO V_CTL_UPD_USER FROM DUAL;
13:13:38 866
13:13:38 867  --    SELECT SEQ_UII_MEMBER_ID.NEXTVAL,
13:13:38 868  --           SEQ_UII_ACCT_ID.NEXTVAL,
13:13:38 869  --           SEQ_UII_PERSON_ID.NEXTVAL
13:13:38 870  --    INTO V_MEMBER_ID,
13:13:38 871  --         V_ACCT_ID,
13:13:38 872  --         V_PERSON_ID
13:13:38 873  --    FROM DUAL;
13:13:38 874
13:13:38 875
13:13:38 876  SELECT DECODE (P_SUPPRESS, NULL, 'N', P_SUPPRESS)
13:13:38 877  INTO V_SUPPRESS
13:13:38 878  FROM DUAL;
13:13:38 879
13:13:38 880  SELECT DECODE (P_STYLE, NULL, 'P', P_STYLE) INTO V_STYLE FROM DUAL;
13:13:38 881
13:13:38 882  --    V_CONFIRM_ID := SEQ_CONFIRM_ID.NEXTVAL;
13:13:38 883  --    V_NOTIFY_ID := SEQ_NOTIFY_ID.NEXTVAL;
13:13:38 884  --    V_SUPPRESS := NVL(P_SUPPRESS, 'N');
13:13:38 885  --    V_STYLE := NVL(P_STYLE, 'P');
13:13:38 886  C_CTL_UPD_USER := 'USER';
13:13:38 887
13:13:38 888  INSERT INTO TU_CONFIRM (CHANGE_ID,
13:13:38 889                          CTYPE,
13:13:38 890                          CDATE,
13:13:38 891                          SEQ_CONFIRM_ID,
13:13:38 892                          SEQ_ACCT_ID,
13:13:38 893                          UII_MEMBER_ID,
13:13:38 894                          SUPPRESS,
13:13:38 895                          STYLE,
13:13:38 896                          CTL_INS_DTTM,
13:13:38 897                          CTL_UPD_DTTM,
13:13:38 898                          CTL_UPD_USER,
13:13:38 899                          CSR_ID)
13:13:38 900  VALUES (P_CHANGE_ID,
13:13:38 901          P_CTYPE,
13:13:38 902          SYSDATE,
13:13:38 903          V_CONFIRM_ID,
13:13:38 904          P_ACCT_ID,
13:13:38 905          P_MEMBER_ID,
13:13:38 906          V_SUPPRESS,
13:13:38 907          V_STYLE,
13:13:38 908          SYSDATE,
13:13:38 909          SYSDATE,
13:13:38 910          C_CTL_UPD_USER,
13:13:38 911          P_CSR_ID);
13:13:38 912
13:13:38 913  SELECT SEQ_NOTIFY_ID.NEXTVAL INTO V_NOTIFY_ID FROM DUAL;
13:13:38 914
13:13:38 915  INSERT INTO TU_NOTIFY (SEQ_NOTIFY_ID,
13:13:38 916                         SEQ_CONFIRM_ID,
13:13:38 917                         CHANGE_ID,
13:13:38 918                         CTYPE,
13:13:38 919                         SEQ_PERSON_ID,
13:13:38 920                         CTL_INS_DTTM,
13:13:38 921                         CTL_UPD_DTTM,
13:13:38 922                         CTL_UPD_USER)
13:13:38 923  VALUES (V_NOTIFY_ID,
13:13:38 924          V_CONFIRM_ID,
13:13:38 925          P_CHANGE_ID,
13:13:38 926          P_CTYPE,
13:13:38 927          P_PERSON_ID,
13:13:38 928          SYSDATE,
13:13:38 929          SYSDATE,
13:13:38 930          C_CTL_UPD_USER);
13:13:38 931  EXCEPTION
13:13:38 932      WHEN OTHERS
13:13:38 933          THEN
13:13:38 934            ROLLBACK;
13:13:38 935
13:13:38 936  END IDP_SYNC_ADD_CONFIRM_NOTIFY;
13:13:38 937
13:13:38 938
13:13:38 939    PROCEDURE IDP_SYNCDTTM_UPDATE(
13:13:38 940              P_BRANDING_IN IN VARCHAR2,
13:13:38 941              P_UUID_LOGIN_ID_IN IN VARCHAR2,
13:13:38 942              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
13:13:38 943              P_UPDATE_COUNT_OUT OUT NUMBER
13:13:38 944          )
13:13:38 945  AS
13:13:38 946      V_UPDATE_COUNT_OUT NUMBER;
13:13:38 947      V_VALID_UUID_LOGIN_ID RAW(16);
13:13:38 948  BEGIN
13:13:38 949  SELECT UUID_LOGIN_ID
13:13:38 950  INTO V_VALID_UUID_LOGIN_ID
13:13:38 951  FROM TA_LOGIN L
13:13:38 952           JOIN TU_TRAUNCH T
13:13:38 953                ON T.TRAUNCH_ID=L.TRAUNCH_ID
13:13:38 954  WHERE UUID_LOGIN_ID = HEXTORAW(P_UUID_LOGIN_ID_IN)
13:13:38 955    AND T.BRANDING = P_BRANDING_IN;
13:13:38 956
13:13:38 957  UPDATE TA_LOGIN
13:13:38 958  SET IDP_SYNC_DTTM = P_IDP_SYNCDTTM_IN
13:13:38 959  WHERE UUID_LOGIN_ID = V_VALID_UUID_LOGIN_ID
13:13:38 960    AND IDP_SYNC_DTTM IS NULL;
13:13:38 961  V_UPDATE_COUNT_OUT := SQL%ROWCOUNT;
13:13:38 962
13:13:38 963  COMMIT;
13:13:38 964
13:13:38 965  P_UPDATE_COUNT_OUT := V_UPDATE_COUNT_OUT;
13:13:38 966
13:13:38 967  EXCEPTION
13:13:38 968        WHEN NO_DATA_FOUND
13:13:38 969        THEN
13:13:38 970            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 971            P_UPDATE_COUNT_OUT := -1;
13:13:38 972  END IDP_SYNCDTTM_UPDATE;
13:13:38 973
13:13:38 974  PROCEDURE IDP_SYNCDTTM_UPDATE_ABLE(
13:13:38 975              P_BRANDING_IN IN VARCHAR2,
13:13:38 976              P_UUID_LOGIN_ID_IN IN VARCHAR2,
13:13:38 977              P_IDP_SYNCDTTM_IN IN TA_LOGIN.IDP_SYNC_DTTM%TYPE,
13:13:38 978              P_UPDATE_COUNT_OUT OUT NUMBER
13:13:38 979          )
13:13:38 980  AS
13:13:38 981      V_UPDATE_COUNT_OUT NUMBER;
13:13:38 982      V_VALID_UUID_LOGIN_ID RAW(16);
13:13:38 983  BEGIN
13:13:38 984  SELECT UUID_LOGIN_ID
13:13:38 985  INTO V_VALID_UUID_LOGIN_ID
13:13:38 986  FROM TA_LOGIN L
13:13:38 987           JOIN TU_TRAUNCH T
13:13:38 988                ON T.TRAUNCH_ID=L.TRAUNCH_ID
13:13:38 989  WHERE UUID_LOGIN_ID = HEXTORAW(P_UUID_LOGIN_ID_IN)
13:13:38 990    AND T.BRANDING = P_BRANDING_IN;
13:13:38 991
13:13:38 992  UPDATE TA_LOGIN
13:13:38 993  SET IDP_SYNC_DTTM = P_IDP_SYNCDTTM_IN
13:13:38 994  WHERE UUID_LOGIN_ID = V_VALID_UUID_LOGIN_ID
13:13:38 995    AND IDP_SYNC_DTTM IS NULL;
13:13:38 996  V_UPDATE_COUNT_OUT := SQL%ROWCOUNT;
13:13:38 997
13:13:38 998  COMMIT;
13:13:38 999
13:13:38 1000  P_UPDATE_COUNT_OUT := V_UPDATE_COUNT_OUT;
13:13:38 1001
13:13:38 1002  EXCEPTION
13:13:38 1003        WHEN NO_DATA_FOUND
13:13:38 1004        THEN
13:13:38 1005            DBMS_OUTPUT.PUT_LINE ('NO_DATA_FOUND');
13:13:38 1006            P_UPDATE_COUNT_OUT := -1;
13:13:38 1007  END IDP_SYNCDTTM_UPDATE_ABLE;
13:13:38 1008
13:13:38 1009      PROCEDURE LOOKUP_PERSON_ACCOUNT_529(
13:13:38 1010              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38 1011              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST)
13:13:38 1012  AS
13:13:38 1013  BEGIN
13:13:38 1014  WITH T_DATA AS (
13:13:38 1015      SELECT DISTINCT A.SEQ_PART_ID, M.UUID_MEMBER_ID, A.UII_MEMBER_ID, M.EMAIL, T.BRANDING
13:13:38 1016      FROM TU_ACCT A
13:13:38 1017               JOIN TU_MEMBER M
13:13:38 1018                    ON M.UII_MEMBER_ID = A.UII_MEMBER_ID
13:13:38 1019                        AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
13:13:38 1020               JOIN TU_TRAUNCH T
13:13:38 1021                    ON T.TRAUNCH_ID = A.TRAUNCH_ID
13:13:38 1022                        AND T.BRANDING = P_ACCT_SEARCH_IN.BRANDING
13:13:38 1023  )
13:13:38 1024  SELECT
13:13:38 1025      UP_PERSON_ACCOUNT_TYPE(
13:13:38 1026              L.USERNAME,
13:13:38 1027              D.UUID_MEMBER_ID,
13:13:38 1028              L.UUID_LOGIN_ID,
13:13:38 1029              P.UUID_PERSON_ID,
13:13:38 1030              P.SSN_E,
13:13:38 1031              P.SSN_CI,
13:13:38 1032              D.EMAIL,
13:13:38 1033              D.BRANDING,
13:13:38 1034              P.LAST_4_SSN
13:13:38 1035      ) BULK COLLECT
13:13:38 1036  INTO P_PERSON_ACCT_OUT_LIST
13:13:38 1037  FROM TA_LOGIN L
13:13:38 1038           JOIN TA_APP_CONTEXT A
13:13:38 1039                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 1040           JOIN T_DATA D
13:13:38 1041                ON D.UII_MEMBER_ID = A.APP_MEMBER_ID
13:13:38 1042           JOIN TU_PERSON P
13:13:38 1043                ON P.SEQ_PERSON_ID = D.SEQ_PART_ID;
13:13:38 1044  EXCEPTION
13:13:38 1045              WHEN NO_DATA_FOUND
13:13:38 1046                  THEN
13:13:38 1047                      DBMS_OUTPUT.PUT_LINE('NO_DATA_FOUND');
13:13:38 1048  END LOOKUP_PERSON_ACCOUNT_529;
13:13:38 1049
13:13:38 1050      PROCEDURE UPDATE_PERSON_LAST4SSN_529 (
13:13:38 1051          P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST)
13:13:38 1052  AS
13:13:38 1053  BEGIN
13:13:38 1054      IF P_PERSON_ACCT_LIST_IN IS NOT NULL
13:13:38 1055      THEN
13:13:38 1056          MERGE INTO TU_PERSON TAR
13:13:38 1057              USING (
13:13:38 1058                  SELECT UUID_PERSON_ID, LAST_4_SSN FROM TABLE(P_PERSON_ACCT_LIST_IN)
13:13:38 1059              ) SRC
13:13:38 1060          ON (SRC.UUID_PERSON_ID = TAR.UUID_PERSON_ID)
13:13:38 1061          WHEN MATCHED THEN UPDATE
13:13:38 1062                                       SET TAR.LAST_4_SSN = SRC.LAST_4_SSN
13:13:38 1063                            WHERE TAR.LAST_4_SSN IS NULL;
13:13:38 1064  END IF;
13:13:38 1065  END UPDATE_PERSON_LAST4SSN_529;
13:13:38 1066
13:13:38 1067
13:13:38 1068      PROCEDURE LOOKUP_IDP_WEB_ENABLED (
13:13:38 1069          P_BRANDING_IN IN VARCHAR2,
13:13:38 1070          P_IDP_WEB_ENABLED_OUT OUT VARCHAR2
13:13:38 1071      ) AS
13:13:38 1072        V_IDP_WEB_ENABLED VARCHAR(5);
13:13:38 1073  BEGIN
13:13:38 1074  SELECT M.ATTRIBUTE_VALUE
13:13:38 1075  INTO V_IDP_WEB_ENABLED
13:13:38 1076  FROM TU_TRAUNCH_METADATA M
13:13:38 1077           JOIN TU_TRAUNCH T
13:13:38 1078                ON T.TRAUNCH_ID = M.TRAUNCH_ID
13:13:38 1079  WHERE
13:13:38 1080      M.ATTRIBUTE_KEY = 'IDP_WEB_ENABLED'
13:13:38 1081    AND T.BRANDING = P_BRANDING_IN;
13:13:38 1082
13:13:38 1083  IF V_IDP_WEB_ENABLED = 'true' THEN
13:13:38 1084        P_IDP_WEB_ENABLED_OUT := 'Y';
13:13:38 1085  ELSE
13:13:38 1086        P_IDP_WEB_ENABLED_OUT := 'N';
13:13:38 1087  END IF;
13:13:38 1088
13:13:38 1089  EXCEPTION
13:13:38 1090        WHEN NO_DATA_FOUND
13:13:38 1091          THEN P_IDP_WEB_ENABLED_OUT := 'N';
13:13:38 1092  END LOOKUP_IDP_WEB_ENABLED;
13:13:38 1093
13:13:38 1094      PROCEDURE LOOKUP_PERSON_ACCOUNT_ABLE(
13:13:38 1095              P_ACCT_SEARCH_IN IN UP_ACCOUNT_SEARCH_TYPE,
13:13:38 1096              P_PERSON_ACCT_OUT_LIST OUT UP_PERSON_ACCOUNT_TYPE_LIST)
13:13:38 1097  AS
13:13:38 1098  BEGIN
13:13:38 1099  SELECT  UP_PERSON_ACCOUNT_TYPE(L.USERNAME,
13:13:38 1100                                 M.UUID_MEMBER_ID,
13:13:38 1101                                 L.UUID_LOGIN_ID,
13:13:38 1102                                 P.UUID_PERSON_ID,
13:13:38 1103                                 P.SSN_E,
13:13:38 1104                                 P.SSN_CI,
13:13:38 1105                                 M.EMAIL,
13:13:38 1106                                 T.BRANDING,
13:13:38 1107                                 P.LAST_4_SSN) BULK COLLECT
13:13:38 1108  INTO P_PERSON_ACCT_OUT_LIST
13:13:38 1109  FROM TA_LOGIN L
13:13:38 1110           JOIN TA_APP_CONTEXT A
13:13:38 1111                ON L.LOGIN_ID = A.LOGIN_ID
13:13:38 1112           JOIN TU_MEMBER M
13:13:38 1113                ON A.APP_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 1114           JOIN TU_ACCT AC
13:13:38 1115                ON AC.UII_MEMBER_ID = M.UII_MEMBER_ID
13:13:38 1116           JOIN TU_TRAUNCH T
13:13:38 1117                ON T.TRAUNCH_ID = AC.TRAUNCH_ID
13:13:38 1118           JOIN TU_PERSON P
13:13:38 1119                ON AC.SEQ_PART_ID = P.SEQ_PERSON_ID
13:13:38 1120  WHERE P.LAST_4_SSN IS NULL
13:13:38 1121    AND UPPER(M.EMAIL) = UPPER(P_ACCT_SEARCH_IN.EMAIL)
13:13:38 1122    AND T.PRODUCT_TYPE='ABLE'
13:13:38 1123    AND T.BRANDING = P_ACCT_SEARCH_IN.BRANDING;
13:13:38 1124  EXCEPTION
13:13:38 1125              WHEN NO_DATA_FOUND
13:13:38 1126                  THEN
13:13:38 1127                      DBMS_OUTPUT.PUT_LINE('NO_DATA_FOUND');
13:13:38 1128  END LOOKUP_PERSON_ACCOUNT_ABLE;
13:13:38 1129
13:13:38 1130      PROCEDURE UPDATE_PERSON_LAST4SSN_ABLE (
13:13:38 1131          P_PERSON_ACCT_LIST_IN IN UP_PERSON_ACCOUNT_TYPE_LIST)
13:13:38 1132  AS
13:13:38 1133  BEGIN
13:13:38 1134      IF P_PERSON_ACCT_LIST_IN IS NOT NULL
13:13:38 1135      THEN
13:13:38 1136          MERGE INTO TU_PERSON TAR
13:13:38 1137              USING (
13:13:38 1138                  SELECT UUID_PERSON_ID, LAST_4_SSN FROM TABLE(P_PERSON_ACCT_LIST_IN)
13:13:38 1139              ) SRC
13:13:38 1140          ON (SRC.UUID_PERSON_ID = TAR.UUID_PERSON_ID)
13:13:38 1141          WHEN MATCHED THEN UPDATE
13:13:38 1142                                       SET TAR.LAST_4_SSN = SRC.LAST_4_SSN
13:13:38 1143                            WHERE TAR.LAST_4_SSN IS NULL;
13:13:38 1144  END IF;
13:13:38 1145  END UPDATE_PERSON_LAST4SSN_ABLE;
13:13:38 1146
13:13:38 1147  END UP_IDP_SYNC;
13:13:38 1148  /

Package body created.

Elapsed: 00:00:00.00
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Add primary key constraint
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- Create Unique Index
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- Add Primary Key using the above Unique Index
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> --Create index(es)
13:13:38 uii0@UIIS03> -- Always use &online_flag for INDEX creation.
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> --Create Foreign key constraint(s)
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Add check constraint(s)
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Create history table
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Add table and column comments
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> --Create sequence(s)
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> --Create synonym(s)
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> CREATE OR REPLACE PUBLIC SYNONYM UP_IDP_SYNC FOR UP_IDP_SYNC;

Synonym created.

Elapsed: 00:00:00.01
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Grants
13:13:38 uii0@UIIS03> -- -----------------------------------------------------------------------------
13:13:38 uii0@UIIS03> GRANT EXECUTE ON UP_IDP_SYNC TO UII0WEB;

Grant succeeded.

Elapsed: 00:00:00.00
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- Create trigger
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03> -- DML Statements [Insert/Update/Delete]
13:13:38 uii0@UIIS03> -------------------------------------------------------------------------------
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> -- Any DML Statement(s) must be followed by a commit.
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03> --commit;
13:13:38 uii0@UIIS03>
13:13:38 uii0@UIIS03>

